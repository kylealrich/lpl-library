ContractThresholdRebateDueContext is a Form
    title is "<mode>ContractRebate"
    Layout
        display as text
            three column distributed
                column1
                    Contract.RepresentativeText
                    ContractRebate.ContractRebateType
                        label is "RebateType"
                column2
                    Contract.Supplier.RepresentativeText
                        label is "Supplier"
                column3
                    Contract.WorkingContractID
                    paragraph
                        Contract.Status
                            display as tag
                                color of turquoise when (Contract.ActivationInProgress)
                                color of brown when (Contract.ContractStatus.Draft)
                                color of green when (Contract.ContractStatus.Released)
                                color of orange when (Contract.ContractStatus.Negotiation)
                                color of yellow when (Contract.ContractStatus.FinalApproval)
                                color of blue when (Contract.ContractStatus.ReadyToActivate)
                                color of green when (Contract.ContractStatus.Active)
                                color of gray when (Contract.ContractStatus.Inactive)
                                color of purple when (Contract.ContractStatus.Addendum)
                                color of purple when (Contract.ContractStatus.Amendment)
                                color of black when (Contract.ContractStatus.Closed)
                        visible when (Contract.OnHold)
                            Contract.OnHoldMessage
                                no label
                                display as tag
                                    color of red
        header2 of "_"
        two column distributed
            column1
                paragraph
                    ContractRebateDue
                        label is "ReportingDueDate"
                    RebateExpectedDate
                        label is "PaymentExpectedDate"
                    Status
                        label is "Status"
                paragraph
                    CurrentBaseOfPurchases
                        label is "BasePurchaseAmount"
                    CurrentPurchases
                        label is "CurrentCalculationPurchases"
                paragraph
                    visible when (not FirstRebateDueDate)
                        CurrentBaseOfPurchases
                            label is "Base_ofPurchasesForGrowth"
                    CurrentPurchases
                        label is "CurrentPurchases"
                    visible when (FirstRebateDueDate)
                        display as text
                            DerivedGrowthMessage
                                no label
                visible when (not FirstRebateDueDate)
                    paragraph
                        display as text
                            visible when (ContractRebate.GrowthByAmount)
                                DerivedGrowthAmount
                                    label is "GrowthAmountReached"
                            visible when (ContractRebate.GrowthByPercent)
                                DerivedGrowthPercent
                                    label is "GrowthPercentReached"
                visible when (PercentageBased)
                    paragraph
                        DerivedCurrentPurchases
                            label is "QualifyingPurchases"
                            display as text
                        ContractRebate.RebatePercent
                            label is "_X_"
                            display as text
                        ExpectedAmount
                            label is "_=_ExpectedRebate"
                visible when (AmountBased)
                    two column
                        RebateAmount
                            label is "RebateAmountPerRebatePeriod"
                        DerivedRebateEarnedOrNotMessage
                            no label
                            display as text
                visible when (not DisplayPercentage)
                    single column
                        ExpectedAmount
                            label is "ExpectedRebate"
            column2
                display as text
                    paragraph
                        TotalRebatesReceived
                            label is "ReceivedAmount"
                        ComputeRemainingAmt
                            label is "RemainingToBeReceived"
                    paragraph
                        TotalReceivedRebateDistributions
                            label is "DistributedAmount"
                        ComputeRemainingDistribAmt
                            label is "ReceivedRemainingToBeDistributed"
                    DerivedRunCalculateRebatesMessage
                        no label
