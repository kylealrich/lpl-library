IntercompanyBillingDocumentMain is a Form
    title is "IntercompanyBillingDocument"
    restrict action AddToSettlement
    Layout
        four column distributed
            column1
                InvoiceDate
            column2
                DueDate
            column3
                paragraph
                    TermsCode
                        label is "PaymentTerms"
                        select is ActiveNetTermsWithNoDiscounts
            column4
                paragraph
                    CreditDebitMemoReason
                        label is "CreditReason"
        four column distributed
            column1
                PostDate
            column2
                paragraph
                    DocumentCurrency
                    DocumentCurrency.Description
                        no label
                        display as text
            column3
                visible when (IntercompanyBillingGroup.UseIDM)
                    paragraph
                        ICBInvoiceIDMTemplate
                            select is IntercompanyBillingInvoiceTemplate
                            raise yellow alert when (NoIntercompanyBillingIDMTemplate)
                                mouse over text is "<NoIntercompanyBillingIDMTemplateMessage>"
                            raise green alert when (HasIDMDocument)
                                mouse over text is "InvoiceHasBeenGenerated"
                            initial value is ReceivableEntity.Company.BillingInvoiceIDMTemplate
                        visible when (not HasIDMDocument)
                            visible when (ICBInvoiceIDMTemplate entered)
                                button of "ViewTemplate"
                                    link is external "<ICBInvoiceIDMTemplate.RetrieveUrl>"
                                    display as link
                        visible when (HasIDMDocument)
                            button of "ViewInvoice"
                                link is external "<DerivedIDMInvoiceLink>"
                                display as link
                visible when (not IntercompanyBillingGroup.UseIDM)
                    paragraph
                        IntercompanyBillingInvoice
                            label is "BillingInvoiceTemplate"
                        visible when (GeneratedInvoiceExists)
                            button of "ViewInvoice"
                                view GeneratedInvoice.File
                                display as link
            column4
                ReceivableEntity.CustomerShipTo
                    label is "ShipTo"
        four column distributed
            visible when (TaxEntityUsesOneSource)
                ReceivableEntity.ShipTerm
                PointOfTitleTransfer
        four column distributed
            Description
                show up to 15 characters
            paragraph
                ReceivableEntity.CustomerBillTo
                    label is "BillTo"
                    select is BillTo
                ReceivableEntity.CustomerBillTo.Name
                    no label
                    display as text
            visible when (DisplayRequiresApprovalForCreate)
                RequiresApproval
                visible when (RequiresApproval)
                    paragraph
                        ApprovalCode
                            select is ApprovalCodesWithLevels
                            show up to 10 characters
                            display as required
                        ApprovalCode.Description
                            no label
                            display as text
            visible when (DisplayRequiresApprovalFlag)
                RequiresApproval
                visible when (RequiresApproval)
                    paragraph
                        ApprovalCode
                            select is ApprovalCodesWithLevels
                            show up to 10 characters
                            display as required
                        ApprovalCode.Description
                            no label
                            display as text
        two column distributed
            column1
                header2 of "Receivable"
                paragraph
                    ReceivableEntity.Company
                        select is ReceivableCompanySelectForIntercompanyBilling
                        display as required
                        when value changed
                            refresh TaxEntityUsesOneSource
                    ReceivableEntity.Company.Name
                        no label
                        display as text
                paragraph
                    visible when (ThisInstanceRelExists)
                        text of "Customer_<ReceivableEntity.Customer>_<ReceivableEntity.Customer.Name>"
                            bold
                paragraph
                    ReceivableEntity.ProcessLevel
                        display as required
                    ReceivableEntity.ProcessLevel.Name
                        no label
                        display as text
                paragraph
                    ReceivableEntity.ReceivableGeneralLedgerCode
                        label is "AccrualCode"
                        display as required
                    ReceivableEntity.ReceivableGeneralLedgerCode.Description
                        no label
                        display as text
                paragraph
                    ReceivableEntity.CurrencyTable
                        show up to 15 characters
                    ReceivableEntity.CurrencyTable.Description
                        no label
                        display as text
                paragraph
                    ReceivableEntity.CurrencyExchangeRate
                        label is "ExchangeRate"
                        show up to 15 characters
                    ReceivableEntity.Company.Currency
                        no label
                        display as text
                InterfaceUnreleasedReceivableInvoice
                    label is "InterfaceUnreleasedInvoice"
                visible when (DisplayApprovalCodes)
                    paragraph
                        ReceivableApprovalCode
                            select is ApprovalCodesWithLevels
                            show up to 10 characters
                            display as required
                        ReceivableApprovalCode.Description
                            no label
                            display as text
                paragraph
                    visible when (ReceivableInvoiceExists)
                        ReceivableEntity.ReceivableInvoice
                            label is "Invoice"
                            display as text
                        button of "View"
                            link is ReceivableInvoice
                            display as link
            column2
                header2 of "Payable"
                paragraph
                    PayableEntity.Company
                        select is PayablesCompanySelectForIntercompanyBilling
                        display as required
                    PayableEntity.Company.Name
                        no label
                        display as text
                paragraph
                    visible when (ThisInstanceRelExists)
                        text of "Vendor_<PayableEntity.Vendor>_<PayableEntity.Vendor.VendorName>"
                            bold
                paragraph
                    PayableEntity.ProcessLevel
                        display as required
                    PayableEntity.ProcessLevel.Name
                        no label
                        display as text
                paragraph
                    PayableEntity.PayablesAccrualCode
                        label is "AccrualCode"
                        display as required
                    PayableEntity.PayablesAccrualCode.Description
                        no label
                        display as text
                paragraph
                    PayableEntity.CurrencyTable
                        show up to 15 characters
                    PayableEntity.CurrencyTable.Description
                        no label
                        display as text
                paragraph
                    PayableEntity.CurrencyExchangeRate
                        label is "ExchangeRate"
                        show up to 15 characters
                    PayableEntity.Company.GeneralLedgerCompany.Currency
                        no label
                        display as text
                InterfaceUnreleasedPayablesInvoice
                    label is "InterfaceUnreleasedInvoice"
                visible when (DisplayApprovalCodes)
                    paragraph
                        ApprovalCode
                            label is "PayableApprovalCode"
                            select is ApprovalCodesWithLevels
                            show up to 10 characters
                            display as required
                        ApprovalCode.Description
                            no label
                            display as text
                paragraph
                    visible when (PayablesInvoiceExists)
                        PayableEntity.PayablesInvoice.Invoice
                            label is "Invoice"
                            display as text
                        button of "View"
                            link is PayablesInvoice
                            display as link
        header2 of "CrossReference"
        four column
            column1
                CrossReferenceType
                    label is "Type"
            column2
                CrossReferenceInvoice
                    label is "Invoice"
                    show up to 15 characters
            column3
                text of "Or"
            column4
                CrossReferenceICBDocument.ICBDocument
                    label is "DocumentNumber"
                    select is AvailableICBDocumentsForCrossReferenceRel.AvailableCrossReferenceICBDocumentList
                    show up to 10 characters
        paragraph
            CrossReferenceAmountToApply
                label is "AmountToApply"
            CrossReferenceAutoApply
                label is "AutoApply"
        visible when (IntercompanyBillingGroup.UseIDM)
            header2 of "IDMOptions"
            two column distributed
                column1
                    paragraph
                        Printer
                            select is ActiveIDMPrinter
                            show up to 10 characters
                        visible when (Printer entered)
                            Printer.Description
                                no label
                                display as text
                        button of "UpdatePrinter"
                            visible when (IsValidForUpdatePrinter)
                            action is UpdatePrinter
                column2
                    paragraph
                        ICBInvoiceEmailRecipient
                            show up to 10 characters
                            raise yellow alert when (BlankEmailAddress)
                                mouse over text is "<DerivedToNotificationMsg>"
                        visible when (DerivedToEmailRecipient entered)
                            text of "<DerivedToEmailRecipient>"
