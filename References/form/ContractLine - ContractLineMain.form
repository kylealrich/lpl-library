ContractLineMain is a Form
    title is "ContractLine"
    Layout
        paragraph
            visible when (not Contract.ServicePurchaseType)
                visible when (not ItemmastAndFromManufacturerContractOrHasBeenActivated)
                    ItemNumber
                        label is "Item"
                        show up to 10 characters
                visible when (ItemmastAndFromManufacturerContractOrHasBeenActivated)
                    ItemNumber
                        label is "Item"
                        display as text
                visible when (ManualItemNumbering)
                    visible when (not HasBeenActivated)
                        ManualItemNumber
            visible when (NotFromManufacturerContractOrItemmast)
                ItemDescription
                    label is "ItemDescription"
                ItemDescription2
                    label is "ItemDescription2"
            visible when (ItemNumberExists)
                ItemDescription
                    label is "ItemDescription"
                    display as text
                ItemDescription2
                    no label
                    display as text
            visible when (FromManufacturerContract)
                visible when (not ItemNumberExists)
                    ItemDescription
                        label is "ItemDescription"
                        display as text
                    ItemDescription2
                        no label
                        display as text
            visible when (not Contract.ServicePurchaseType)
                ItemType
                visible when (ItemType.Service)
                    ServiceCode
        visible when (NotFromManufacturerContractOrItemmast)
            visible when (not Contract.ServicePurchaseType)
                single column
                    ItemDescription3
                        label is "LongItemDescription"
                        use text area of 2 lines
        visible when (ItemNumberExists)
            visible when (HasLongDescription)
                single column
                    ItemNumber.Description3
                        label is "LongItemDescription"
                        display as text
        visible when (FromManufacturerContract)
            visible when (not ItemNumberExists)
                visible when (MfgDescription3Entered)
                    single column
                        MfgContractLineRel.ItemDescription3
                            label is "LongItemDescription"
                            display as text
        visible when (Contract.ServicePurchaseType)
            single column
                ServiceCode
        visible when (not Contract.ServicePurchaseType)
            two column distributed
                column1
                    paragraph
                        visible when (not HasBeenActivatedAndVendorItemExistsAndNoErrors)
                            visible when (CannotUpdateGPO)
                                VendorItem
                                    display as text
                            visible when (not CannotUpdateGPO)
                                VendorItem
                                    select is ActiveVendorItemsForItem
                                    show up to 10 characters
                        visible when (HasBeenActivatedAndVendorItemExistsAndNoErrors)
                            VendorItem
                                display as text
                        visible when (not HasVendorItem)
                            visible when (not ServiceItem)
                                VendorItemDescription
                                    label is "Description"
                        visible when (HasVendorItem)
                            VendorItem.VendorItemDescription
                                label is "Description"
                                display as text
                column2
                    visible when (IsDistributorWithManufacturerContract)
                        paragraph
                            MfgContractLineRel.VendorItem
                                label is "ManufacturerVendorItem"
                                display as text
                            MfgContractLineRel.VendorItemDescription
                                label is "Description"
                                display as text
        visible when (ShowChangeOrderDetails)
            display as text
                paragraph
                    BaseCostLessChangeOrders
                        label is "BaseAmount"
                    ChangeOrderAmounts
                    BaseCost
                        label is "CurrentNetAmount"
                    visible when (HasAllowances)
                        DerivedAllowanceAmount
                            label is "AllowanceAmount"
        paragraph
            visible when (not FromManufacturerContract)
                visible when (not ChangeOrderOnly)
                    visible when (CannotUpdateGPO)
                        BaseCost
                            display as text
                    visible when (not CannotUpdateGPO)
                        visible when (NotNewChangeOrderLine)
                            visible when (CapitatedProcedure.NotAProcedure)
                                BaseCost
                            visible when (CapitatedProcedure.PrimaryAndRevision)
                                BaseCost
                                    label is "PrimaryProcedureCost"
                            visible when (CapitatedProcedure.PrimaryOnly)
                                BaseCost
                                    label is "PrimaryProcedureCost"
                        visible when (not NotNewChangeOrderLine)
                            BaseCost
                                display as text
            visible when (FromManufacturerContract)
                BaseCost
                    display as text
            visible when (CannotUpdateGPO)
                UOM.UnitOfMeasure
                    display as text
            visible when (not CannotUpdateGPO)
                UOM.UnitOfMeasure
                    select is ValidBuyUnitsOfMeasure
            visible when (ContractLineExists)
                visible when (ItemNumberExists)
                    UOMConversion
                        display as text
                    visible when (StockUOMUsedForUOMConversion)
                        ItemNumber.StockUOM
                            display as text
                visible when (SpecialItem)
                    visible when (CannotUpdateGPO)
                        UOMConversion
                            display as text
                    visible when (not CannotUpdateGPO)
                        UOMConversion
                    LowUOMCode.UnitOfMeasure
                        label is "UnitOfUseUOM"
            visible when (ContractLineExists)
                visible when (not Contract.ServicePurchaseType)
                    DisplayBaseCostForLowestDivisibleCost
                        label is "BaseCostForLowestDivisibleCost"
                        display as text
            visible when (not Contract.ServicePurchaseType)
                visible when (HasPreviousCost)
                    FutureCost
                        display as text
                visible when (not Contract.AllowChangeOrder)
                    CostOption
            visible when (Contract.AllowChangeOrder)
                visible when (not HasBeenActivated)
                    CostOption
                visible when (HasBeenActivated)
                    CostOption
                        display as text
        visible when (ContractLineTierCostExists)
            single column
                text of "SeeTierCostsTabForCosts"
                    bold
        visible when (Contract.CapitatedContract)
            visible when (not Contract.CapitatedComponentsOnly)
                two column
                    visible when (CapitatedProcedure.PrimaryAndRevision)
                        RevisionProcedureCost
                    visible when (CapitatedProcedure.RevisionOnly)
                        RevisionProcedureCost
                    visible when (not ContractLineExists)
                        CapitatedProcedure
                    visible when (ContractLineExists)
                        visible when (IsACapitatedProcedure)
                            CapitatedProcedure
            visible when (Contract.CapitatedComponentsOnly)
                visible when (not ContractLineExists)
                    paragraph
                        text of "CapitatedItemCosts:"
                        TransientPrimaryDiscount
                            label is "PrimaryDiscount"
                        TransientPrimaryFinalCost
                            label is "PrimaryFinalCost"
                        TransientRevisionDiscount
                            label is "RevisionDiscount"
                        TransientRevisionFinalCost
                            label is "RevisionFinalCost"
        two column distributed
            column1
                visible when (not Contract.ContractTemplate)
                    paragraph
                        visible when (not FromManufacturerContract)
                            visible when (CannotUpdateGPO)
                                EffectiveDate
                                    label is "CurrentEffectiveDate"
                                    display as text
                                ExpirationDate
                                    label is "CurrentExpirationDate"
                                    display as text
                            visible when (not CannotUpdateGPO)
                                EffectiveDate
                                    label is "CurrentEffectiveDate"
                                ExpirationDate
                                    label is "CurrentExpirationDate"
                        visible when (FromManufacturerContract)
                            EffectiveDate
                                label is "CurrentEffectiveDate"
                                display as text
                            ExpirationDate
                                label is "CurrentExpirationDate"
                                display as text
                visible when (not Contract.ServicePurchaseType)
                    visible when (ContractLineExists)
                        visible when (ItemType.Special)
                            paragraph
                                visible when (CannotUpdateGPO)
                                    visible when (not CanUpdateOnlyThisManufacturerInformationForCurrent)
                                        Manufacturer
                                            label is "ManufacturerCode"
                                            compact format
                                    visible when (CanUpdateOnlyThisManufacturerInformationForCurrent)
                                        Manufacturer
                                            label is "ManufacturerCode"
                                            display as text
                                            compact format
                                    ManufacturerNumber
                                        display as text
                                visible when (not CannotUpdateGPO)
                                    visible when (DistWithMfgLine)
                                        Manufacturer
                                            label is "ManufacturerCode"
                                            display as text
                                            compact format
                                        ManufacturerNumber
                                            display as text
                                    visible when (not DistWithMfgLine)
                                        visible when (not CanUpdateOnlyThisManufacturerInformationForCurrent)
                                            Manufacturer
                                                label is "ManufacturerCode"
                                                compact format
                                            ManufacturerNumber
                                        visible when (CanUpdateOnlyThisManufacturerInformationForCurrent)
                                            Manufacturer
                                                label is "ManufacturerCode"
                                                display as text
                                                compact format
                                            ManufacturerNumber
                                                display as text
                            visible when (CanUpdateOnlyThisManufacturerInformationForCurrent)
                                text of "MultipleLinesExistWithTheSameManufacturerInformation;Run_Update_Manufacturer_InformationToChange"
                                    italics
                        visible when (ItemType.Itemmast)
                            paragraph
                                Manufacturer
                                    label is "ManufacturerCode"
                                    display as text
                                    compact format
                                ManufacturerNumber
                                    display as text
                    visible when (not ContractLineExists)
                        paragraph
                            Manufacturer
                                label is "ManufacturerCode"
                                compact format
                            ManufacturerNumber
                visible when (MismatchWithVendorItem)
                    single column
                        text of "EnteredManufacturerInformationDoesNotMatch_Vendor_Item"
                            italics
                    paragraph
                        VendorItem.Manufacturer
                            label is "VendorItemManufacturerInformation"
                            display as text
                            compact format
                        VendorItem.ManufacturerNumber
                            no label
                            display as text
                visible when (ItemType.Itemmast)
                    visible when (MismatchWithGTIN)
                        single column
                            text of "EnteredManufacturerInformationDoesNotMatchGTIN"
                                italics
                        paragraph
                            GlobalTradeItemNumber.Manufacturer
                                label is "GTINManufacturerInformation"
                                display as text
                                compact format
                            GlobalTradeItemNumber.ManufacturerNumber
                                no label
                                display as text
                visible when (MismatchWithManufacturerContractLine)
                    paragraph
                        MfgContractLineRel.Manufacturer
                            label is "ManufacturerContractManufacturerCode"
                            display as text
                            compact format
                        MfgContractLineRel.ManufacturerNumber
                            display as text
                paragraph
                    visible when (not FromManufacturerContract)
                        GlobalTradeItemNumber
                            select is ActiveGTINNumbers
                    visible when (FromManufacturerContract)
                        GlobalTradeItemNumber
                            display as text
                    visible when (GlobalTradeItemNumberExists)
                        GlobalTradeItemNumber.FullDescription
                            no label
                            display as text
                    visible when (SpecialItemLowUOMCodeEntered)
                        LowUOMCodeGTIN
                            label is "UnitOfUseGTIN"
                visible when (LineDoesNotExistAndNotUsingHeaderCommitments)
                    paragraph
                        TransientAccount
                            label is "DefaultAccount"
                            compact format
                paragraph
                    visible when (not ServiceCode.Amount)
                        visible when (not Contract.StandingPurchaseType)
                            visible when (not ChangeOrderOnly)
                                LifetimeMaximumQuantity
                            visible when (ChangeOrderOnly)
                                LifetimeMaximumQuantity
                                    display as text
                    visible when (not Contract.StandingOrService)
                        Priority
                    visible when (Contract.StandingPurchaseType)
                        Quantity
                            label is "StandingQuantity"
                visible when (ServicePurchaseTypeContract)
                    paragraph
                        LifetimeMaximumAmount
                            display as text
                    paragraph
                        visible when (ServiceCode.Amount)
                            text of "LifetimeMaximumAmountIsEqualToBaseCostForAmountTypeService"
                                italics
                        visible when (ServiceCode.Quantity)
                            visible when (LifetimeMaximumQuantityEntered)
                                text of "LifetimeMaximumAmountIsEqualToBaseCostTimesMaximumQuantityForQuantityTypeService"
                                    italics
                visible when (LastMatchCostEntered)
                    CurrentNetCost
                        bold
                        display as text
                visible when (Contract.BlanketOrStanding)
                    paragraph
                        visible when (not FromManufacturerContract)
                            BlanketStandingRequestingLocation
                        visible when (FromManufacturerContract)
                            BlanketStandingRequestingLocation
                                display as text
                visible when (Contract.HasAPurchaseType)
                    paragraph
                        visible when (Contract.SubtypeEntered)
                            Contract.ContractSubtype.PurchaseType
                        visible when (not Contract.SubtypeEntered)
                            Contract.ContractType.PurchaseType
                                display as text
                visible when (FromEvent)
                    paragraph
                        SourcingEventNumber
                            label is "OriginatingSourcingEventNumber_andLineNumber"
                            display as text
                        SourcingEventLineNumber
                            no label
                            display as text
                visible when (OnEvent)
                    text of "EventLineCreatedFromContractLine:"
                    paragraph
                        ToEventCompany
                            label is "Company"
                            display as text
                        ToEventNumber
                            label is "Event"
                            display as text
                    paragraph
                        ToEventLine
                            label is "Line"
                            display as text
                        button of "ViewEvent"
                            link is SourcingEventFromContractLine
                visible when (ShowMessages)
                    header2 of "Messages"
                paragraph
                    visible when (NotAvailableForUse)
                        text of "ItemMaster<first VendorItemNotAvailableForUse.Item>HasBeenSetToNotAvailableForUseAndContractLineHasBeenConvertedToASpecialItemType"
                            italics
                            color of blue
                    visible when (ItemNotInUse)
                        text of "ItemIsNotAvailableForUse"
                            italics
                            color of blue
            column2
                visible when (not Contract.ServicePurchaseType)
                    visible when (not ServiceItem)
                        PreferredLine
                visible when (ServiceItem)
                    single column
                        UNSPSCCode
                            label is "UNSPSC"
                            compact format
                paragraph
                    visible when (NotFromManufacturerContractOrItemmast)
                        CommodityCode
                            compact format
                            select is CommodityCodeSelect
                        CommodityCode.Description
                            no label
                            display as text
                    visible when (FromManufacturerContractNotItemmast)
                        CommodityCode
                            display as text
                            compact format
                        CommodityCode.Description
                            no label
                            display as text
                    visible when (ItemmastForCommodityCode)
                        ItemNumber.CommodityCode
                            display as text
                        ItemNumber.CommodityCode.CcDescription
                            no label
                            display as text
                visible when (ServiceItem)
                    visible when (not Contract.ServicePurchaseType)
                        paragraph
                            MajorPurchasingClass
                                label is "PurchasingClass"
                                select is MajorActivePurchasingClasses
                                show up to 10 characters
                            MinorPurchasingClass
                                no label
                                show up to 10 characters
                paragraph
                    visible when (not Contract.UseHeaderCommitments)
                        visible when (not Contract.ServicePurchaseType)
                            PayablesDistributionCode
                                select is DistributionCodesByPercentage
                        visible when (Contract.ServicePurchaseType)
                            PayablesDistributionCode
                                select is DistributionCodesForServiceContracts
                    RemainingPercentToBeDistributed
                        label is "Percent_ofLineYet_toBeDistributed"
                        display as text
                StandardCommentCode
                    label is "CommentCode"
                paragraph
                    visible when (ContractLineExists)
                        visible when (LineNotClosed)
                            visible when (NonManufCanUseForCostDefaulting)
                                CanUseForCostDefaulting
                            visible when (IsManufacturerForCostDefaulting)
                                text of "CanBeUsedForCostDefaulting"
                                    bold
                            visible when (IsManufacturerNotForCostDefaulting)
                                text of "NotUsedForCostDefaulting"
                                    bold
                            visible when (Contract.ServicePurchaseType)
                                CanUseForInvoicePayment
                visible when (IsHSNSACCodeEnabled)
                    paragraph
                        HSNSACCode
                        HSNSACCode.Description
                            no label
                            display as text
                visible when (HoldOnSomething)
                    header2 of "HoldInformation"
                visible when (ContractLineExists)
                    visible when (ContractHasAPurchaseType)
                        visible when (not Contract.ContractTemplate)
                            visible when (HoldOnLine)
                                text of "LineIsOnHold"
                                    bold
                                    color of red
                                visible when (HoldCodeEntered)
                                    ProcurementReasonCode
                                        display as text
                                    ProcurementReasonCode.Description
                                        no label
                                        display as text
                            visible when (HoldOnContract)
                                text of "LineIsOnHoldFromContract"
                                    bold
                                    color of red
                                visible when (Contract.HoldCodeEntered)
                                    Contract.ProcurementReasonCode
                                        display as text
                                    Contract.ProcurementReasonCode.Description
                                        no label
                                        display as text
                            visible when (HoldFromContractInactivation)
                                text of "LineIsOnHoldBecauseContractIsInactive"
                                    bold
                                    color of red
                            visible when (DistLinesOnHold)
                                text of "AssociatedDistributorContractLinesAreOnHold"
                                    bold
                            visible when (DistWithMfgLineHeldMessage)
                                text of "AssociatedManufacturerContractLineIsOnHold"
                                    bold
                                visible when (MfgContractLineRel.HoldCodeEntered)
                                    MfgContractLineRel.ProcurementReasonCode
                                        display as text
                                    MfgContractLineRel.ProcurementReasonCode.Description
                                        no label
                                        display as text
                                visible when (MfgContractRel.HoldCodeEntered)
                                    MfgContractRel.ProcurementReasonCode
                                        display as text
                                    MfgContractRel.ProcurementReasonCode.Description
                                        no label
                                        display as text
