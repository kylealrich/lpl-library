ContractChangeOrderForm is a Form
    is primary
    title is "ChangeOrderDetail"
    Actions
        action is save
            label is "_"
        action is save and new
            label is "_"
        action is save and close
    Layout
        three column distributed
            Contract.RepresentativeText
                display as text
            visible when (ContractLineEntered)
                ContractLine
                    display as text
        three column distributed
            visible when (not ContractLineEntered)
                visible when (ChangeOrderExists)
                    CreateNewLine
                        display as text
                visible when (not ChangeOrderExists)
                    CreateNewLine
            visible when (CreateNewLine)
                visible when (not ContractLineEntered)
                    Account
                        compact format
                visible when (ContractLineEntered)
                    button of "Account"
                        link is AccountLink
                        display as link
        single column
            visible when (NotFromItemmast)
                Description
                    label is "ItemDescription"
            visible when (LineItemExists)
                Description
                    label is "ItemDescription"
                    display as text
        three column distributed
            visible when (not IsServicePurchaseType)
                LineItem
                    label is "Item"
                LineItemType
                    label is "ItemType"
                visible when (LineItemType.Service)
                    LineServiceCode
        three column distributed
            visible when (not IsServicePurchaseType)
                BaseCost
                LineUOM
                    select is ValidBuyUnitsOfMeasure
                LineDescription
        three column distributed
            visible when (not IsServicePurchaseType)
                VendorItem
                LineVendorItemDescription
                    label is "VendorItemDescription"
        three column distributed
            visible when (not IsServicePurchaseType)
                LineManufacturer
                    label is "ManufacturerCode"
                    compact format
                LineManufacturerNumber
                    label is "ManufacturerNumber"
        three column distributed
            visible when (not IsServicePurchaseType)
                LineLifetimeMaximumAmount
                    label is "LifetimeMaximumAmount"
                visible when (not LineServiceCode.Amount)
                    LineLifetimeMaximumQuantity
                        label is "LifetimeMaximumQuantity"
                visible when (Contract.StandingPurchaseType)
                    Quantity
                        label is "StandingQuantity"
        three column distributed
            visible when (IsServicePurchaseType)
                ChangeReason
                visible when (AllowanceOptions.NotAnAllowance)
                    BaseCost
                visible when (AllowanceOptions.DrawDown)
                    BaseCost
                        label is "IncreaseToLineAmount"
                visible when (ContractLineEntered)
                    visible when (ContractLine.QuantityServiceItem)
                        visible when (AllowanceOptions.NotAnAllowance)
                            Quantity
                        visible when (AllowanceOptions.DrawDown)
                            Quantity
                                label is "IncreaseToLineQuantity"
        four column distributed
            visible when (IsServicePurchaseType)
                visible when (not CreateNewLine)
                    visible when (AllowanceOptions.NewAllowance)
                        ForAllowance
                        AllowanceDescription
                    visible when (AllowanceOptions.AllowanceChangeOnly)
                        ForAllowance
                            display as text
                        AllowanceDescription
                            display as text
                    visible when (AllowanceOptions.DrawDown)
                        ForAllowance
                            display as text
                        AllowanceDescription
                            display as text
                visible when (CreateNewLine)
                    visible when (AllowanceOptions.NewAllowance)
                        visible when (not ContractLineEntered)
                            ForAllowance
                            AllowanceDescription
                        visible when (ContractLineEntered)
                            ForAllowance
                                display as text
                            AllowanceDescription
                                display as text
                visible when (not ChangeOrderExists)
                    AllowanceOptions
                visible when (ChangeOrderExists)
                    AllowanceOptions
                        display as text
        four column distributed
            visible when (AllowanceOptions.NewAllowance)
                visible when (CreateNewLine)
                    visible when (not ContractLineEntered)
                        AllowanceAmount
                    visible when (ContractLineEntered)
                        AllowanceAmount
                            display as text
                visible when (not CreateNewLine)
                    AllowanceAmount
                visible when (ContractLineEntered)
                    visible when (ContractLine.QuantityServiceItem)
                        AllowanceQuantity
            visible when (AllowanceOptions.AllowanceChangeOnly)
                AllowanceAmount
                    label is "ChangeToAllowanceAmount"
                visible when (ContractLineEntered)
                    visible when (ContractLine.QuantityServiceItem)
                        AllowanceQuantity
                ForAllowance.Amount
                    label is "CurrentAllowanceAmount"
                    display as text
            visible when (AllowanceOptions.DrawDown)
                AllowanceAmount
                    label is "DecreaseToAllowanceAmount"
                visible when (ContractLineEntered)
                    visible when (ContractLine.QuantityServiceItem)
                        AllowanceQuantity
                            label is "DecreaseToAllowanceQuantity"
                ForAllowance.Amount
                    label is "CurrentAllowanceAmount"
                    display as text
        visible when (CreateNewLine)
            visible when (not ContractLineEntered)
                visible when (IsServicePurchaseType)
                    three column distributed
                        text of "ItemTypeIsService"
                            italics
                        text of "EntryOfRequiredFieldsForServiceCodeWillAutomaticallyCreateLine"
                            italics
        four column distributed
            visible when (CreateNewLine)
                visible when (not ContractLineEntered)
                    LineDescription
                    LineServiceCode
                    LineUOM
                visible when (not ContractLineEntered)
                    display as text
                        LineDescription
                        LineServiceCode
                        LineUOM
        paragraph
            visible when (HasAttachment)
                Attachment.Title
            Attachment.File
                label is "Document"
