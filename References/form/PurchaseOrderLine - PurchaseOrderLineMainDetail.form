PurchaseOrderLineMainDetail is a Form
    Layout
        header2 of "GeneralInformation"
        three column distributed
            column1
                Item
                    display as required when (true)
                    when value changed
                        refresh TaxCodeRequired
                Description
                    label is "Description"
                    display as required when (DescriptionRequired)
                visible when (OriginalItemExists)
                    paragraph
                        OriginalItem
                            label is "OriginalItem"
                                italics
                            display only
                        OriginalItemRel.Description
                            label is "OriginalItemDescription"
                                italics
                VendorItem
                    select is VendorItemListForItemAndVendor
                paragraph
                    ItemType
                        when value changed
                            refresh ServiceCodeRequired
                            refresh EarlyDeliveryDateRequired
                            refresh EnteredBuyUOMRequired
                            refresh DescriptionRequired
                            refresh TaxCodeRequired
                    visible when (ItemType.Service)
                        ServiceCode
                            display as required when (ServiceCodeRequired)
                            when value changed
                                refresh QuantityRequired
                    visible when (not ItemType.Service)
                        ServiceCode
                            display as text
                paragraph
                    visible when (HasBlanketOrStandingContract)
                        Contract
                            display as text
                    visible when (not HasBlanketOrStandingContract)
                        Contract
                            select is ContractsForCostDefaulting
                            show up to 10 characters
                    visible when (ForContractLineDisplay)
                        ContractLine
                            display as text
                    visible when (ItemType.Service)
                        visible when (ForContractLineEdit)
                            visible when (not HasBlanketOrStandingContract)
                                EnteredContractLine
                                    label is "ContractLine"
                                    select is ContractLinesForAServiceItemPO
                                    show up to 10 characters
                                    when value changed
                                        refresh ServiceCodeRequired
                                        refresh EnteredBuyUOMRequired
                                        refresh DescriptionRequired
                                        refresh TaxCodeRequired
            column2
                Quantity
                    display as required when (QuantityRequired)
                EnteredBuyUOM
                    select is ValidBuyUnitsOfMeasure
                    display as required when (EnteredBuyUOMRequired)
                VendorBuyUnitCost
                    label is "UnitCost"
                    display as required when (IsCostRequired)
                visible when (not IsInventoryType)
                    DistributionBy
                visible when (false)
                    TransientOnline
            column3
                EarlyDeliveryDate
                    display as required when (EarlyDeliveryDateRequired)
                LateDeliveryDate
                ShipToLocation
                    when value changed
                        refresh TaxCodeRequired
                POShipDate
                    display only
                visible when (IsInventoryLineEnetered)
                    DistributionCode
                visible when (IsInventoryType)
                    single column
                        GeneralLedgerCategoryRel.InventoryAccount
                            label is "DistributionAccount"
                            compact format
        visible when (ItemIsInventoryOrNonstock)
            visible when (HasSpecialHandlingCode)
                header2 of "SpecialHandling"
                two column distributed
                    column1
                        paragraph
                            DerivedSpecialHandlingCode
                                label is "SpecialHandlingCode"
                            SpecialHandlingCode.Description
                                no label
                                display as text
                        visible when (HasHandlingInstructionsToDisplay)
                            SpecialHandlingInstructions
                                display as text
                                use text area of 5 lines
                single column
                    SpecialHandlingCode.TimeSensitive
                        display as text
                visible when (SpecialHandlingCode.IsTimeSensitive)
                    DerivedHandlingTimeInMinutes
                        label is "HandlingTimeInMinutes"
        visible when (ItemIsSpecial)
            header2 of "SpecialHandling"
            two column distributed
                column1
                    paragraph
                        SpecialHandlingCode
                            select is ActiveSpecialHandlingCodes
                            when value changed
                                SpecialHandlingInstructions =  blank
                        SpecialHandlingCode.Description
                            no label
                            display as text
                    visible when (SpecialHandlingCode.SpecialHandlingCodeExists)
                        SpecialHandlingInstructions
                            use text area of 5 lines
            single column
                visible when (SpecialHandlingCode.SpecialHandlingCodeExists)
                    SpecialHandlingCode.TimeSensitive
                        display as text
                visible when (SpecialHandlingCode.IsTimeSensitive)
                    HandlingTimeInMinutes
                        label is "HandlingTimeInMinutes"
        header2 of "Tax"
        three column distributed
            column1
                Taxable
                    when value changed
                        refresh TaxCodeRequired
                        refresh IsOneSourceTax
            column2
                paragraph
                    TaxCode
                        display as required when (TaxCodeRequired)
                    LandedCostMessage
                        no label
                        display as text
            column3
                ProductTaxCategory
                visible when (IsOneSourceTax)
                    PointOfTitleTransfer
                        display as text
        visible when (IsHSNSACCodeEnabled)
            paragraph
                HSNSACCode
                    display as required when (IsHSNSACCodeEnabled)
                    when value changed
                        refresh TaxCodeRequired
                HSNSACCode.Description
                    no label
                    display as text
        three column distributed
            column1
                TaxUsageCode
            column2
                paragraph
                    TaxableUnitCost
                    ExtendedTaxableAmount
                        label is "ExtendedTotal"
                        display as text
        visible when (Taxable)
            display as text
                paragraph
                    visible when (HasInvoicedTaxAmount)
                        InvoicedTaxAmount
                            label is "ExtendedInvoicedTaxAmount"
                    visible when (HasAccruedTaxAmount)
                        AccruedTaxAmount
                            label is "ExtendedAccruedTaxAmount"
        header2 of "Pricing"
        three column distributed
            column1
                display as text
                    paragraph
                        Quantity
                            label is "BuyQuantity"
                        EnteredBuyUOM
                            no label
                        VendorPriceUOMQuantity
                            label is "VendorPriceQuantity"
                        VendorPriceUOM
                            no label
                        CalculateExtendedAmount
                            label is "Total"
            column2
                display as text
                    paragraph
                        VendorPriceUOM
                            label is "PricedByThe"
                        VendorPriceUnitCost
                            label is "At"
                        CalculateExtendedAmount
                            label is "Total"
            column3
                paragraph
                    CostOption
                        when value changed
                            refresh IsCostRequired
                    Tier
                        display as text
                    Preferred
                        label is "PreferredItem"
                paragraph
                    visible when (IsACapitatedProcedure)
                        CapitatedProcedureLevel
                            label is "ProcedureLevel"
                            display as text
                    visible when (ContractLineIsACapitatedComponent)
                        ContractCapitatedComponentGroupRel.Name
                            label is "ComponentGroup"
                            display as text
                    visible when (CapitatedProcedureLineEntered)
                        first ProcedureForThisPurchaseOrderRel.Description
                            label is "ForProcedure"
                            display as text
                        first ProcedureForThisPurchaseOrderRel.CapitatedProcedureLevel
                            label is "ProcedureLevel"
                            display as text
        two column
            column1
                header2 of "MiscellaneousDetails"
                paragraph
                    ItemGTIN
                        label is "G\\T\\I\\N"
                        select is ActiveGTINNumbersForAnItem
                    ItemGTIN.AbbreviatedDescription
                        no label
                        display as text
                CnCode
                    label is "BillCode"
                    display as required when (ConsignmentRequired)
            column2
                header2 of "Messages"
                visible when (IsVendorInactive)
                    paragraph
                        text of "<VendorInactiveMessage>"
                            header4
                visible when (IsDistributionNotBalanced)
                    paragraph
                        text of "<DistributionNotInBalanceMessage>"
                            header4
                visible when (IsDropship)
                    paragraph
                        text of "<DropshipOrderMessage>"
                            header4
                visible when (HasCostCode)
                    paragraph
                        text of "<DerivedCostCodeMessage>"
                            header4
                visible when (MiscellaneousAddOnChargeExists)
                    paragraph
                        text of "<HasMiscAddOnChargeMessage>"
                            header4
                visible when (AddOnChargeExists)
                    paragraph
                        text of "<HasAddOnChargeMessage>"
                            header4
        visible when (IsRetainageAllowed)
            header3 of "Retainage"
        visible when (IsRetainageContract)
            paragraph
                text of "RetainageOnContract"
        visible when (IsHeaderRetainage)
            visible when (CostOption.CostRequired)
                single column
                    Retainage
                    RetainageFirstPercent
                        label is "FirstRetainagePercent"
                        display as required when (Retainage.Yes)
                    RetainageUpToPercentComplete
                        label is "UpToPercentComplete"
                        display as required when (Retainage.Yes)
                    RetainageSecondPercent
                        label is "SecondRetainagePercent"
                    RetainagePercentComplete
                        label is "PercentComplete"
                        display as text
                    RetainageOverridePercentComplete
                        label is "OverridePercentComplete"
            visible when (CostOption.VendorDetermined)
                visible when (not ItemType.Service)
                    single column
                        Retainage
                        RetainageFirstPercent
                            label is "FirstRetainagePercent"
                            display as required when (Retainage.Yes)
                        RetainageUpToPercentComplete
                            label is "UpToPercentComplete"
                            display as required when (Retainage.Yes)
                        RetainageSecondPercent
                            label is "SecondRetainagePercent"
                        RetainagePercentComplete
                            label is "PercentComplete"
                            display as text
                        RetainageOverridePercentComplete
                            label is "OverridePercentComplete"
