PayablesInvoiceContextForm is a Form
    title is "Invoice"
    Layout
        display as text
            six column distributed
                column1
                    visible when (Vendor.HasLogo)
                        Vendor.Logo.File
                            display as portrait image
                                missing image is random background
                                    foreground text is "<Vendor.XiVendorNameAbbreviation>"
                column2
                    visible when (RecordExists)
                        Invoice
                    paragraph
                        visible when (VoucherNumberEntered)
                            VoucherNumberDisplay
                    visible when (InApprovalProcess)
                        visible when (InvoiceRoutingCodeGroupEntered)
                            InvoiceRoutingCodeGroup.Name
                                display as text
                    paragraph
                        button of "ViewInvoiceDocument"
                            visible when (InvoiceImageEntered)
                            view first PayablesInvoiceDocumentInvoiceTypeRel.Attachment.File
                            display as link
                        button of "<DerivedDocumentManagementButtonText>"
                            valid when (DocumentManagementButtonValid)
                            visible when (DisplayDocumentMgmtButton)
                            link is external "<DerivedInvoiceURL>"
                                lazy url retrieval
                            display as link
                column3
                    visible when (MatchProcessType.Expense)
                        paragraph
                            DerivedInvoiceAmount
                                label is "InvoiceAmount"
                            DerivedCurrencyLabel
                                no label
                        paragraph
                            DerivedTotalTaxAmountField
                column4
                    visible when (MatchProcessType.Expense)
                        paragraph
                            PayablesInvoiceTaxRel.TotalAccruedTaxAmount
                                label is "TotalAccruedTax"
                        paragraph
                            PayablesInvoiceTaxRel.TotalInvoicedTaxAmount
                                label is "TotalInvoicedTax"
                            visible when (ExpenseTaxIsOutOfBalance)
                                TaxOutOfBalanceAmount
                                    label is "OutOfBalance"
                                    display as tag
                                        color of red when (ExpenseTaxIsOutOfBalance)
                    visible when (IsAPurchaseOrderInvoice)
                        MatchAmount
                            label is "Goods"
                        AddOnChargeAmount
                            label is "AddOnCharges"
                    visible when (InApprovalProcess)
                        visible when (not UsesMatrixApproval)
                            RoutingCode
                                display as text
                column5
                    visible when (MatchProcessType.Expense)
                        visible when (not InvoiceType.Prepayment)
                            visible when (not InvoiceType.PrepaymentCredit)
                                visible when (not IsChargeback)
                                    paragraph
                                        DerivedTotalDistributionAmountField
                                            label is "TotalDistributions"
                                        visible when (DistributionsAreOutOfBalance)
                                            DistributionOutOfBalanceAmount
                                                label is "OutOfBalance"
                                                display as tag
                                                    color of red when (DistributionsAreOutOfBalance)
                        paragraph
                            DerivedTotalPaymentAmountField
                                label is "TotalPayments"
                            visible when (PaymentsAreOutOfBalance)
                                PaymentOutOfBalanceAmount
                                    label is "OutOfBalance"
                                    display as tag
                                        color of red when (PaymentsAreOutOfBalance)
                    visible when (IsAPurchaseOrderInvoice)
                        ServiceAmount
                            label is "Services"
                        visible when (not InvoiceMatched)
                            DerivedMatchInvoiceTaxAmount
                                label is "InvoicedTaxAmount"
                        visible when (InvoiceMatched)
                            DerivedTotalTaxAmountField
                    visible when (InApprovalProcess)
                        visible when (DisplayResponsiblePerson)
                            ResponsiblePerson.PreferredSimplePresentationName
                                label is "CurrentApprover"
                column6
                    paragraph
                        visible when (RecordExists)
                            Status
                        visible when (not RecordExists)
                            UnreleasedMessage
                                label is "Status"
                    visible when (ProcessingTeamEntered)
                        paragraph
                            ProcessingTeam
                            ProcessingTeam.Description
                                no label
                    visible when (APClerkEntered)
                        APClerk.PreferredFirstAndLastName
                            label is "Processor"
                    visible when (InApprovalProcess)
                        button of "<ResponsibleTeam.Description>"
                            visible when (ResponsibleTeamEntered)
                            link is ApproversForTeam
                            label is "ApprovalTeam"
                            display as link
                        button of "<ResponsibleRole>"
                            visible when (DisplayResponsibleRole)
                            link is ApproversForRole
                            label is "CurrentApprovalRole"
                            display as link
        paragraph
            visible when (RecordExists)
                button of "<DerivedReplacementInvoiceNavigationMessage>"
                    visible when (DisplayReplacementInvoiceLink)
                    link is UpdatedRecurringInvoice
                visible when (VendorIsOnHold)
                    VendorOnHoldMessage
                        no label
                        display as tag
                            color of red
                visible when (RemitToCode.OnHold)
                    RemitToOnHoldMessage
                        no label
                        display as tag
                            color of red
                visible when (IsOnHold)
                    InvoiceHasPaymentsOnHoldMsg
                        no label
                        display as tag
                            color of red
                visible when (DisplayCreateInProgress)
                    CreateDetailsProcessingInBackgroundMsg
                        no label
                        display as tag
                            color of red
                visible when (DisplayMatchInProgress)
                    MatchProcessingInBackgroundMsg
                        no label
                        display as tag
                            color of red
                visible when (DisplayMatchInProgressWithAsyncFailure)
                    MatchProcessingInBackgroundAsyncFailureMsg
                        no label
                        display as tag
                            color of red
                visible when (DisplayTransientAutoMatchError)
                    TransientAutoMatchError
                        display as tag
                            color of red
                visible when (DisplayUnmatchInProgress)
                    UnmatchProcessingInBackgroundMsg
                        no label
                        display as tag
                            color of red
                visible when (DisplayProcessingInBackground)
                    ProcessingInBackgroundMsg
                        no label
                        display as tag
                            color of red
                visible when (DisplayDistCodeInProcess)
                    DistributionCodeIsProcessingInBackgroundMsg
                        no label
                        display as tag
                            color of red
                visible when (DisplayTaxInProgress)
                    TaxIsProcessingInBackgroundMsg
                        no label
                        display as tag
                            color of red
                visible when (DisplaySabrixMessage)
                    DerivedSabrixMessage
                        display as tag
                            color of red
                visible when (BudgetEditInProgress)
                    BudgetEditsInProgress
                        no label
                        display as tag
                            color of red
                visible when (BudgetEditFailure)
                    BudgetsExceededCouldNotReleaseMsg
                        no label
                        display as tag
                            color of red
                visible when (DisplayMatchUnsuccessful)
                    text of "LastMatchAttempt:<DerivedLastMatchMessage>"
                        display as tag
                            color of red
                visible when (DisplayExceedsMaxSpendAmount)
                    ExceedsMaxSpendMsg
                        no label
                        display as tag
                            color of red
                visible when (DisplayErrorWarning)
                    ErrorsExistMsg
                        no label
                        display as tag
                            color of red
                visible when (HasInterEntityRelationExist)
                    IsInterEntityRelationMsg
                        no label
                        display as tag
                            color of yellow
