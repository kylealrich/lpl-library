RequisitionLineMain is a Form
    title is "Main"
    restrict action Processed.UpdateLineReturn
    restrict action MobileCopyRequisitionLine
    restrict action ModalCopyMultipleRequisitionLines
    restrict action NonModalCopyRequisitionLine
    restrict action Unreleased.RSSLPLUpdateRequisitionLine
    restrict action RSSLPLAddNewSpecialServiceToNewRequisition
    restrict action RSSLPLAddNewSpecialServiceToRequisition
    restrict action ModalCopyMultipleRequisitionLinesForSpecialAndService
    restrict action NonModalCopyRequisitionLineForSpecialAndService
    restrict action ModalCopyRequisitionLineForSpecialAndService
    restrict action MobileCopyRequisitionLineForSpecialAndService
    restrict action RSSLPLModalCopyLineOptionPromptForRecentlyRequestedItems
    restrict action RSSLPLModalCopyLineOptionPromptForSpecialAndService
    Layout
        paragraph
            Item
                display as required when (true)
                when value changed
                    refresh CommodityCodeRequired
                    refresh DescriptionRequired
                    refresh MajorPurchasingClassRequired
                    refresh PurchaseTaxCodeRequired
            Item.Description2
                no label
                display as text
        two column distributed
            Description
                display as required when (DescriptionRequired)
            paragraph
                DistributionBy
                InventoryTransactionType
                    display as text
        visible when (OriginalItemExists)
            two column distributed
                column1
                    OriginalItem
                        label is "OriginalItem"
                            italics
                        display only
                column2
                    OriginalItemRel.Description
                        label is "OriginalItemDescription"
                            italics
                        display as text
        two column distributed
            paragraph
                Quantity
                    display as required when (QuantityRequired)
                EnteredUOM
                    label is "UOM"
                    select is ValidRequisitionUnitsOfMeasure
                    raise blue alert when (LocationStockUOMRounded)
                        mouse over text is "<RoundingMessage>"
                    display as required when (EnteredUOMRequired)
            paragraph
                TransactionUnitCost
                    label is "UnitCost"
                    display as required when (TransactionUnitCostRequired)
                TransactionCurrencyCode
                    label is "Currency"
                    when value changed
                        refresh VendorRequired
        two column distributed
            DistributionCode
            VendorItem
                select is VendorItemsForItem
        two column distributed
            paragraph
                RequestedDeliveryDate
                LateDeliveryDate
            paragraph
                AllocationPriority
                    label is "Priority"
                CreatePurchaseOrder
                    when value changed
                        refresh PurchaseTaxCodeRequired
                        refresh SourcingEventRequired
                DeliveryMethod
        two column distributed
            column1
                ItemType
                    when value changed
                        refresh CommodityCodeRequired
                        refresh ContractLineRequired
                        refresh EnteredUOMRequired
                        refresh MajorPurchasingClassRequired
                        refresh PurchaseTaxCodeRequired
                        refresh ServiceCodeRequired
                        refresh VendorRequired
            column2
                paragraph
                    CostOption
                        when value changed
                            refresh PurchaseTaxCodeRequired
                            refresh TransactionUnitCostRequired
                    OverrideCost
                        display as text
        visible when (ItemType.Service)
            single column
                ServiceCode
                    display as required when (ServiceCodeRequired)
                    when value changed
                        refresh QuantityRequired
        header2 of "PurchasingOptions"
        display as text
            visible when (SourcingEventRequired)
                two column distributed
                    paragraph
                        Vendor
                        Vendor.VendorName
                            no label
                    paragraph
                        PurchaseFromLocation
                            label is "PurchaseFrom"
                        PurchaseFromLocation.VendorName
                            no label
        visible when (not SourcingEventRequired)
            two column distributed
                paragraph
                    visible when (Requisition.CreatedBySupplier)
                        Vendor
                            display as text
                    visible when (not Requisition.CreatedBySupplier)
                        Vendor
                            display as required when (VendorRequired)
                    Vendor.VendorName
                        no label
                        display as text
                paragraph
                    PurchaseFromLocation
                        label is "PurchaseFrom"
                        select is NonRemitToActivePurchaseFromLocations
                    PurchaseFromLocation.VendorName
                        no label
                        display as text
        two column distributed
            paragraph
                POCode
                POCode.Description
                    no label
                    display as text
            paragraph
                Buyer
                Buyer.Employee.FirstLastName
                    no label
                    display as text
                visible when (HasBuyer)
                    button of icon.profile
                        link is MobileBuyerInformation
        two column distributed
            paragraph
                visible when (false)
                    TransientTaxEntity
                visible when (RequisitionLine entered)
                    PurchaseTaxable
                        label is "Taxable"
                        when value changed
                            refresh PurchaseTaxCodeRequired
                visible when (RequisitionLine not entered)
                    TransientPurchaseTaxable
                        label is "Taxable"
                PurchaseTaxCode
                    label is "TaxCode"
                    select is ValidTaxCodesForEntity
                    display as required when (PurchaseTaxCodeRequired)
                PurchaseTaxCode.Description
                    no label
                    display as text
                ProductTaxCategory
            paragraph
                InspectionRequired
                CertificationRequired
        two column distributed
            ConsignCode
                label is "BillCode"
            visible when (LineExists)
                paragraph
                    visible when (SourcingEventRequired)
                        display as text
                            Contract
                            ContractLine
                                label is "Line"
                    visible when (not SourcingEventRequired)
                        Contract
                            select is ContractsForCostDefaulting
                            display as required when (ContractRequired)
                            when value changed
                                refresh ContractLineRequired
                        visible when (not ForContractLineEdit)
                            ContractLine
                                display as text
                        visible when (ForContractLineEdit)
                            EnteredContractLine
                                select is ContractLinesForAServiceItemRQ
                                display as required when (ContractLineRequired)
                                when value changed
                                    refresh ContractRequired
                    display as text
                        Tier
                        Preferred
                        visible when (Requisition.ForCapitatedProcedure)
                            visible when (not IsACapitatedProcedure)
                                ContractCapitatedComponentGroupRel.Name
                                    label is "ComponentGroup"
                                visible when (CapitatedProcedureLine entered)
                                    first ProcedureForThisRequisitionRel.Description
                                        label is "ForProcedure"
                                CapitatedProcedureLevel
                                    label is "ProcedureLevel"
                    visible when (IsACapitatedProcedure)
                        visible when (PrimaryOrRevisionProcedure)
                            visible when (ProcedureHasComponents)
                                CapitatedProcedureLevel
                                    display as text
                            visible when (not ProcedureHasComponents)
                                visible when (IsUnreleased)
                                    CapitatedProcedureLevel
                                visible when (not IsUnreleased)
                                    CapitatedProcedureLevel
                                        display as text
                        visible when (PrimaryProcedure)
                            single column
                                text of "ProcedureIsPrimary"
                                    bold
                        visible when (RevisionProcedure)
                            single column
                                text of "ProcedureIsRevision"
                                    bold
            visible when (not LineExists)
                paragraph
                    visible when (SourcingEventRequired)
                        display as text
                            Contract
                            ContractLine
                                label is "Line"
                    visible when (not SourcingEventRequired)
                        Contract
                            select is ContractsForCostDefaulting
                            display as required when (ContractRequired)
                            when value changed
                                refresh ContractLineRequired
                        visible when (not ItemType.Service)
                            ContractLine
                                label is "Line"
                                display as text
                        visible when (ItemType.Service)
                            EnteredContractLine
                                select is ContractLinesForAServiceItemRQ
                                display as required when (ContractLineRequired)
                                when value changed
                                    refresh ContractRequired
                    display as text
                        Tier
                        Preferred
        header2 of "Classes_andCodes"
        two column distributed
            paragraph
                MajorPurchasingClass
                    show up to 10 characters
                    display as required when (MajorPurchasingClassRequired)
                MajorPurchasingClass.Description
                    no label
                    display as text
            paragraph
                MinorPurchasingClass
                    show up to 10 characters
                MinorPurchasingClass.Description
                    no label
                    display as text
        two column distributed
            paragraph
                ItemGTIN
                    label is "G\\T\\I\\N"
                    select is ActiveGTINNumbersForAnItem
                ItemGTIN.AbbreviatedDescription
                    no label
                    display as text
            paragraph
                SourcingEventRequired
                    when value changed
                        refresh VendorRequired
                visible when (SourcingEventExists)
                    first SourcingEventLineSourceRel.SourcingEvent
                        label is "SourcingEventAndLine"
                        display as text
                    first SourcingEventLineSourceRel.SourcingEventLine
                        no label
                        display as text
        two column distributed
            Manufacturer
                label is "ManufacturerCode\\/\\Division"
                compact format
            ManufacturerNumber
        two column distributed
            column1
                paragraph
                    CommodityCode
                        display as required when (CommodityCodeRequired)
                    CommodityCode.CcDescription
                        no label
                        display as text
            column2
                StandardCommentCode
                    label is "CommentCode"
        two column distributed
            column1
                paragraph
                    UNSPSCCode
                        compact format
        visible when (IsHSNSACCodeEnabled)
            paragraph
                HSNSACCode
                    display as required when (HSNSACCodeRequired)
                HSNSACCode.Description
                    no label
                    display as text
        visible when (IsInventoryOrNonstock)
            visible when (HasSpecialHandlingCode)
                header2 of "SpecialHandling"
                two column distributed
                    column1
                        paragraph
                            DerivedSpecialHandlingCode
                                label is "SpecialHandlingCode"
                            SpecialHandlingCode.Description
                                no label
                                display as text
                        visible when (HasHandlingInstructionsToDisplay)
                            SpecialHandlingInstructions
                                display as text
                                use text area of 5 lines
                single column
                    SpecialHandlingCode.TimeSensitive
                        display as text
                visible when (SpecialHandlingCode.IsTimeSensitive)
                    DerivedHandlingTimeInMinutes
                        label is "HandlingTimeInMinutes"
        visible when (IsSpecial)
            header2 of "SpecialHandling"
            two column distributed
                column1
                    paragraph
                        SpecialHandlingCode
                            select is ActiveSpecialHandlingCodes
                            when value changed
                                SpecialHandlingInstructions =  blank
                        SpecialHandlingCode.Description
                            no label
                            display as text
                    visible when (SpecialHandlingCode.SpecialHandlingCodeExists)
                        SpecialHandlingInstructions
                            use text area of 5 lines
            single column
                visible when (SpecialHandlingCode.SpecialHandlingCodeExists)
                    SpecialHandlingCode.TimeSensitive
                visible when (SpecialHandlingCode.IsTimeSensitive)
                    HandlingTimeInMinutes
        header2 of "Miscellaneous"
        two column distributed
            column1
                FromCompanyLocationBin.FromCompany
                    label is "DeliverFromCompany"
                FromCompanyLocationBin.FromLocation
                    label is "DeliverFromLocation"
                    select is RQInventoryLocations
                    when value changed
                        refresh PurchaseTaxCodeRequired
                paragraph
                    visible when (not IsCreatePurchaseOrder)
                        FillOrKill
                            label is "Fill_orKillFlag"
                        KilledQuantity
                            label is "KillQuantity"
                            display as text
            column2
                LocationRule
                DeliverTo
                paragraph
                    PreferenceCardTransaction
                        label is "For_\\Scheduled_\\Procedure"
                        display as text
                    visible when (PreferenceCardTransaction)
                        button of "<ScheduledProcedure>"
                            link is ScheduledProcedureRel.ScheduledProcedureNav
                            label is "ScheduledProcedure"
                            display as link
                        button of "<ScheduledProcedureLine>"
                            link is ScheduledProcedureLineRel.ScheduledProcedureLineNav
                            label is "ScheduledProcedureLine"
                            display as link
        two column distributed
            column1
                header2 of "Currency"
                display as text
                    paragraph
                        UnitCost
                            label is "BaseUnitCost"
                        ConversionRate
            column2
                header2 of "Global"
                GlobalLineType
                    label is "LineType"
        visible when (not IsCreatePurchaseOrder)
            header2 of "WarehouseOrder"
            display as text
                three column distributed
                    column1
                        paragraph
                            first WarehouseDemandLines2Rel.WarehouseDemandLine.LineNumber
                                label is "DemandLineNumber"
                        paragraph
                            DisplayFromWarehouseDemandLineBackorderedQuantity
                    column2
                        DisplayFromWarehouseDemandLineQuantity
                            label is "OrderQuantity"
                        KilledQuantity
                    column3
                        first WarehouseDemandLines2Rel.AllocatedQuantity
                        first WarehouseShipmentLinesRel.ShippedQuantity
