InvoicePaymentsContext is a Form
    is primary
    title is "<DerivedFormTitle>"
    Actions
        action is PutOnHold
            hide when invalid
        action is TakeOffHold
            hide when invalid
        action is UpdateIncomeCodeAndReportableAmount
        action is previous record
            label is "_"
        action is next record
            label is "_"
        action is Create
            action icon is create
            label is "_"
            mouse over text is "Create"
            hide when invalid
            valid when (CreateActionValid)
        action is save
            label is "_"
        action is save and new
            label is "_"
        action is Delete
            action icon is delete
            label is "_"
            mouse over text is "Delete"
            hide when invalid
            valid when (DeleteActionValid)
        action is refresh
            label is "_"
    Layout
        header2 of "InvoiceInformation"
        display as text
            three column distributed
                column1
                    PayablesInvoice.DerivedCompanyRepresentativeText
                        label is "Company"
                    PayablesInvoice.DerivedVendorNameID
                    paragraph
                        PayablesInvoice.Invoice
                            label is "Invoice"
                        visible when (PayablesInvoice.IsRecurringInvoice)
                            Suffix
                                label is "-"
                        PayablesInvoicePayment.PaymentSequence
                column2
                    PayablesInvoice.RemitToCode
                    PayGroup
                    visible when (PayablesInvoice.ProcessingTeamEntered)
                        PayablesInvoice.ProcessingTeam
                    visible when (not PayablesInvoice.ProcessingTeamEntered)
                        PayablesInvoice.APClerk.PreferredSimplePresentationName
                            label is "Processor"
                column3
                    PayablesInvoice.InvoiceAmount.CurrencyAmount
                        label is "InvoiceAmount"
                    paragraph
                        PayablesInvoice.TotalPaymentAmount.TransactionTotal
                            label is "TotalPaymentAmount"
                        visible when (PayablesInvoice.PaymentsAreOutOfBalance)
                            PayablesInvoice.PaymentOutOfBalanceAmount
                                label is "OutOfBalance"
                                display as tag
                                    color of red
        header2 of "PaymentInformation"
        three column distributed
            column1
                DueDate
                paragraph
                    PaymentAmount.CurrencyAmount
                        label is "PaymentAmount"
                    InvoiceCurrency
                        no label
                        display as text
                paragraph
                    CashCode
                    CashCode.Description
                        no label
                        display as text
                CashCode.Currency
                    label is "CashCodeCurrency"
                    display as text
                paragraph
                    BankTransactionCode
                        label is "PaymentCode"
                        select is CashPaymentsOrBillOfExchangePayments
                    BankTransactionCode.Description
                        no label
                        display as text
                paragraph
                    VendorPaymentAmount
                    VendorPaymentCurrency
                        no label
                visible when (BankCheckAmountEntered)
                    NetVendorPaymentAmount
                        display as text
            column2
                paragraph
                    PayVendor
                        display as text
                    PayVendor.VendorName
                        no label
                        display as text
                InvoiceGroup
                display as text
                    first PayablesOnHoldRel.HoldCode
                    paragraph
                        IncomeCode
                        IncomeCode.Description
                            no label
                    Status
            column3
                valid when (not PayablesInvoice.IsCreditInvoice)
                    SeparatePayment
                PayImmediately
                Enclosure
                visible when (IsSplitPayment)
                    PayablesInvoice.NumberOfSplitPayments
                        display as text
                    PayablesInvoice.SplitPaymentSchedule
                        display as text
                blank line
        header2 of "Discount"
        three column distributed
            DiscountDate
            DiscountPercent
            TransientAllowableAmount
                label is "AllowableAmount"
            DiscountAmount.CurrencyAmount
                label is "DiscountAmount"
            Anticipation
            DiscountCode
        header2 of "PaymentTransactionDetail"
        display as text
            three column distributed
                column1
                    TransactionNumber
                    ReportableIncomeAmount
                    FATCATransactionIncomeAmount
                column2
                    CheckDate
                    CashLedgerPayablesPaymentRel.CashLedgerTransactionIdentifier
                    paragraph
                        FATCAIncomeCode
                        FATCAIncomeCode.Description
                            no label
                column3
                    paragraph
                        DerivedCheckAmount
                            label is "PaymentAmount"
                        CreditOrInvoiceAppliedMessage
                            no label
                    paragraph
                        button of "ViewPaymentTransaction"
                            visible when (HasCheck)
                            link is CashLedgerPayablesPaymentForm
                            display as link
                        button of "ApplyToReservedPayment"
                            visible when (ApplyableToReserved)
                            link is ApplyReservedPayment
                            display as link
                        button of "ApplyToManualPayment"
                            visible when (ApplyableToNonReserved)
                            link is ApplyPayment
                            display as link
                    FATCABaseIncomeAmount
                        label is "FATCAFunctionalIncomeAmount"
        visible when (IsDraftPayment)
            header2 of "BillOfExchange"
            display as text
                paragraph
                    DerivedDraftNumber
                        label is "BillOfExchangeNumber"
                    DerivedDraftSuffix
                        no label
                    DerivedDraftDate
                        label is "DraftDate"
        header2 of "CurrencyInformation"
        visible when (false)
            single column
                PayablesInvoice.InvoiceAmount.AssignToCurrency
                PaymentAmount.AssignToCurrency
                RevaluedBaseAmount.AssignToCurrency
                DiscountAmount.AssignToCurrency
                NetPaymentAmount.AssignToCurrency
        three column distributed
            column1
                display as text
                    InvoiceCurrency
                    Company.GeneralLedgerCompany.Currency
                        label is "FunctionalCurrency"
                    PaymentAmount.FunctionalAmount.EnteredCurrencyRate
                        label is "CurrencyExchangeRate"
                    PayablesInvoice.RevalueCurrency
            column2
                display as text
                    PayablesInvoice.InvoiceAmount.FunctionalAmount.EnteredCurrencyAmount
                        label is "FunctionalInvoiceAmount"
                    PaymentAmount.FunctionalAmount.EnteredCurrencyAmount
                        label is "FunctionalPaymentAmount"
                    RevaluedBaseAmount.FunctionalAmount.EnteredCurrencyAmount
                        label is "RevaluedFunctionalAmount"
                    DiscountAmount.FunctionalAmount.EnteredCurrencyAmount
                        label is "FunctionalDiscountAmount"
                        display as text
            column3
                paragraph
                    NetPaymentAmount.CurrencyAmount
                        label is "NetPaymentAmount"
                        display as text
                paragraph
                    visible when (false)
                        NetPaymentAmount.AssignToCurrency
                    NetPaymentAmount.FunctionalAmount.EnteredCurrencyAmount
                        label is "FunctionalNetPaymentAmount"
                        display as text
                paragraph
                    BankCheckAmount
                        label is "BankPaymentAmount"
                        display as text
