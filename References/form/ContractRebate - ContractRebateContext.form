ContractRebateContext is a Form
    title is "ContractRebate"
    Layout
        display as text
            three column distributed
                column1
                    Contract.RepresentativeText
                    Contract.ExpirationDate
                column2
                    Contract.Supplier.RepresentativeText
                        label is "Supplier"
                column3
                    Contract.WorkingContractID
                    paragraph
                        Contract.Status
                            display as tag
                                color of turquoise when (Contract.ActivationInProgress)
                                color of brown when (Contract.ContractStatus.Draft)
                                color of green when (Contract.ContractStatus.Released)
                                color of orange when (Contract.ContractStatus.Negotiation)
                                color of yellow when (Contract.ContractStatus.FinalApproval)
                                color of blue when (Contract.ContractStatus.ReadyToActivate)
                                color of green when (Contract.ContractStatus.Active)
                                color of gray when (Contract.ContractStatus.Inactive)
                                color of purple when (Contract.ContractStatus.Addendum)
                                color of purple when (Contract.ContractStatus.Amendment)
                                color of black when (Contract.ContractStatus.Closed)
                        visible when (Contract.OnHold)
                            Contract.OnHoldMessage
                                no label
                                display as tag
                                    color of red
        header2 of "_"
        two column distributed
            column1
                visible when (not ContractRebateExists)
                    paragraph
                        TransientContractRebateType
                            label is "RebateType"
                        TransientContractRebateType.RebateType
                            label is "RebateCategory"
                visible when (ContractRebateExists)
                    paragraph
                        ContractRebateType
                            label is "RebateType"
                        ContractRebateType.RebateType
                            label is "RebateCategory"
                paragraph
                    Frequency
                    FirstRebateDueDate
                        label is "FirstReportingDueDate"
                    FirstPaymentDate
                        label is "FirstPaymentExpectedDate"
                        display as text
                paragraph
                    TotalExpectedAmount
                        display as text
                    visible when (NotFixedRebate)
                        Contract.LastRebateCalculationRunDate
                            display as text
                visible when (Contract.PaymentDueDaysEntered)
                    display as text
                        paragraph
                            Contract.PaymentDueDays
                                no label
                            text of "DefaultDaysToAddToRebateReportingDueDateForPaymentExpectedDate"
                                italics
            column2
                Active
                visible when (TransientContractRebateType.RebateType.SupplementalRebate)
                    SupplementalBasisRebate.ContractRebateType
                        label is "BasisRebateType"
                        select is ContractRebateTypesForContextContract
                visible when (ContractRebateType.RebateType.SupplementalRebate)
                    SupplementalBasisRebate.ContractRebateType
                        label is "BasisRebateType"
                        select is ContractRebateTypesForContextContract
                visible when (TransientContractRebateType.RebateType.GrowthRebate)
                    paragraph
                        CalculateGrowthInSpendFromLastYearToThisYearOnly
                            label is "YearlyGrowthBasis:"
                        CalculateRebateAmountOnAllSpendForQualifyingContracts
                visible when (ContractRebateType.RebateType.GrowthRebate)
                    paragraph
                        CalculateGrowthInSpendFromLastYearToThisYearOnly
                            label is "YearlyGrowthBasis:"
                        DerivedFieldDescriptionForGrowthBasis
                            no label
                            display as text
                visible when (TransientContractRebateType.RebateType.LoyaltyRebate)
                    CalculateRebateAmountOnAllSpendForQualifyingContracts
                visible when (ContractRebateType.RebateType.LoyaltyRebate)
                    paragraph
                        CalculateRebateAmountOnAllSpendForQualifyingContracts
                        DerivedFieldDescriptionForCalculationBasis
                            no label
                            display as text
                visible when (TransientContractRebateType.RebateType.StandardRebate)
                    paragraph
                        RebatePercent
                            label is "RebatePercent"
                        PotentialPeriodRebateAmount
                            label is "\\orRebateAmountPerRebatePeriod"
                        PotentialRebateAmountPerUnit
                            label is "\\orRebateAmountPerUnit"
                    paragraph
                        CalculateRebateAmountOnAllSpendForQualifyingContracts
                visible when (ContractRebateType.RebateType.StandardRebate)
                    paragraph
                        RebatePercent
                            label is "RebatePercent"
                        PotentialPeriodRebateAmount
                            label is "\\orRebateAmountPerRebatePeriod"
                        PotentialRebateAmountPerUnit
                            label is "\\orRebateAmountPerUnit"
                    paragraph
                        CalculateRebateAmountOnAllSpendForQualifyingContracts
                visible when (TransientContractRebateType.RebateType.MultipleThresholdRebate)
                    paragraph
                        CalculateRebateAmountOnAllSpendForQualifyingContracts
                visible when (ContractRebateType.RebateType.MultipleThresholdRebate)
                    paragraph
                        CalculateRebateAmountOnAllSpendForQualifyingContracts
                visible when (TransientContractRebateType.RebateType.SupplementalRebate)
                    paragraph
                        CalculateRebateAmountOnAllSpendForQualifyingContracts
                visible when (ContractRebateType.RebateType.SupplementalRebate)
                    paragraph
                        CalculateRebateAmountOnAllSpendForQualifyingContracts
