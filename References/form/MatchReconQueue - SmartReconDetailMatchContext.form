SmartReconDetailMatchContext is a Form
    Layout
        visible when (not FilesRebuilt)
            paragraph
                button of "RefreshWorkFiles"
                    action is ResetWorkFiles
                text of "FileRefreshRequired"
        five column distributed
            visible when (not PayablesInvoice.HasBeenMatched)
                paragraph
                    button of "Invoice<Invoice>"
                        link is PayablesInvoiceLink
                        display as link
                    visible when (HasMessageForWorkList)
                        button of "<DerivedMessageLinkTitle>"
                            link is SmartReconMatchInvoiceMessageCommentNavigation
                            display as link
                    button of "PO<PurchaseOrder>"
                        link is PurchaseOrderLink
                        display as link
                    visible when (PrepayPostDateNeedsUpdating)
                        button of "UpdatePostDate"
                            action is UpdatePostDate
                            display as link
                            raise red alert when (PrepayPostDateNeedsUpdating)
                                mouse over text is "PostDateIsNotWithinValidEntryDates"
            visible when (FilesRebuilt)
                visible when (View.DetailMatch)
                    paragraph
                        text of "TotalSets:<NumberOfSets>"
                            left align
                        button of "Link"
                            link is AllSetsNavigationDetailMatch
                            display as link
                    visible when (not PayablesInvoice.InvoiceType.MatchPrepayment)
                        paragraph
                            text of "Chargeback:"
                                left align
                            button of "<ChargebackYesOrNo>"
                                action is SetChargeback
                                display as link
                            visible when (Chargeback)
                                ChargebackReason
                                    label is "Reason"
                                    display as text
                                ChargebackReference
                                    no label
                                    display as text
                        visible when (DisplayLineChargebackAmount)
                            paragraph
                                visible when (UseNet)
                                    text of "NetLineChargebackAmount<NetLineChargebackAmount>"
                                visible when (UseOverbill)
                                    text of "OverbillLineChargebackAmount<OverbillLineChargebackAmount>"
                    paragraph
                        visible when (UseNet)
                            text of "Net:<NetSelected>"
                                left align
                        visible when (UseOverbill)
                            text of "Overbill:<OverbillSelected>"
                                left align
                    visible when (HasAddOnCharges)
                        paragraph
                            text of "AOC_Difference:"
                                left align
                            button of "<CostComponentDifference>"
                                link is CostComponentLink
                                display as link
                visible when (View.InvoiceMatch)
                    paragraph
                        text of "TotalSets:<NumberOfSets>"
                            left align
                        button of "Link"
                            link is AllSetsNavigationInvoiceMatch
                            display as link
                    visible when (not PayablesInvoice.InvoiceType.MatchPrepayment)
                        paragraph
                            text of "Chargeback:"
                                left align
                            button of "<ChargebackYesOrNo>"
                                action is SetChargeback
                                display as link
                            visible when (Chargeback)
                                ChargebackReason
                                    label is "Reason"
                                    display as text
                                ChargebackReference
                                    no label
                                    display as text
                    paragraph
                        visible when (UseNet)
                            text of "Net:<NetSelectedInvoiceMatch>"
                                left align
                        visible when (UseOverbill)
                            text of "Overbill:<OverbillSelectedInvoiceMatch>"
                                left align
        visible when (View.MatchComplete)
            three column table
                column1
                    DerivedMatchStatus
                        label is "MatchStatus"
                    PayablesInvoice.Status
                        label is "InvoiceStatus"
                    PayablesInvoice.RuleGroup
                    PayablesInvoice.RuleGroup.Description
                        no label
                        display as text
                column2
                    display as text
                        PayablesInvoice.MatchProcessType
                        PayablesInvoice.MatchLevel
                        PayablesInvoice.MatchDate
                column3
                    button of "Invoice"
                        link is PayablesInvoiceLink
                        display as link
        visible when (FilesRebuilt)
            visible when (View.DetailMatch)
                six column distributed table
                    column headers
                        "<QuantityMsg>"
                        "<TotalCostMsg>"
                        "|"
                        "<SetMsg>"
                        "<DiscrepancyMsg>"
                    row headers
                        "InvoiceLine"
                        "ReceiverLine"
                        "Discrepancy"
                    column1
                        display as text
                            PendingInvoiceLineQuantity
                                no label
                            PendingReceiptLineQuantity
                                no label
                            PendingLineQuantityDifference
                                no label
                    column2
                        display as text
                            PendingInvoiceLineExtendedAmount
                                no label
                            PendingReceiptLineExtendedAmount
                                no label
                            PendingLineTotalDifference
                                no label
                        visible when (AllowCreateSet)
                            button of "CreateSet"
                                action is CreateSet
                                align as label
                    column3
                        text of "|"
                        text of "|"
                        text of "|"
                        visible when (CreateMatchReconMessage)
                            text of "ChargebackReconOption:"
                                left align
                            button of "<ChargebackReconOption>"
                                action is SetChargebackReconOption
                                display as link
                    column4
                        visible when (Previous1Exists)
                            button of "<Previous1Msg>"
                                link is Previous1Link
                                display as link
                        visible when (Previous2Exists)
                            button of "<Previous2Msg>"
                                link is Previous2Link
                                display as link
                        visible when (Previous3Exists)
                            button of "<Previous3Msg>"
                                link is Previous3Link
                                display as link
                    column5
                        display as text
                            visible when (Previous1Exists)
                                Previous1Discrepancy
                                    no label
                            visible when (Previous2Exists)
                                Previous2Discrepancy
                                    no label
                            visible when (Previous3Exists)
                                Previous3Discrepancy
                                    no label
                    column6
                        visible when (not View.MatchComplete)
                            visible when (Previous1Exists)
                                button of "Undo"
                                    action is UndoSet1
                            visible when (Previous2Exists)
                                button of "Undo"
                                    action is UndoSet2
                            visible when (Previous3Exists)
                                button of "Undo"
                                    action is UndoSet3
            visible when (View.InvoiceMatch)
                six column distributed table
                    column headers
                        "<QuantityMsg>"
                        "<TotalCostMsg>"
                        "|"
                        "<SetMsg>"
                        "<DiscrepancyMsg>"
                    row headers
                        "Invoice"
                        "Receipt"
                        "Discrepancy"
                    column1
                        display as text
                            PendingInvoiceQuantity
                                no label
                            PendingReceiptQuantity
                                no label
                            PendingQuantityDifference
                                no label
                    column2
                        display as text
                            PendingInvoiceExtendedAmount
                                no label
                            PendingReceiptExtendedAmount
                                no label
                            PendingTotalDifference
                                no label
                        visible when (AllowCreateInvoiceSet)
                            button of "CreateSet"
                                action is CreateInvoiceSet
                    column3
                        text of "|"
                        text of "|"
                        text of "|"
                    column4
                        visible when (Previous1Exists)
                            button of "<Previous1MsgIM>"
                                link is Previous1LinkInvoiceMatch
                                display as link
                        visible when (Previous2Exists)
                            button of "<Previous2MsgIM>"
                                link is Previous2LinkInvoiceMatch
                                display as link
                        visible when (Previous3Exists)
                            button of "<Previous3MsgIM>"
                                link is Previous3LinkInvoiceMatch
                                display as link
                    column5
                        display as text
                            visible when (Previous1Exists)
                                Previous1DiscrepancyIM
                                    no label
                            visible when (Previous2Exists)
                                Previous2DiscrepancyIM
                                    no label
                            visible when (Previous3Exists)
                                Previous3DiscrepancyIM
                                    no label
                    column6
                        visible when (not View.MatchComplete)
                            visible when (Previous1Exists)
                                button of "Undo"
                                    action is UndoSet1
                            visible when (Previous2Exists)
                                button of "Undo"
                                    action is UndoSet2
                            visible when (Previous3Exists)
                                button of "Undo"
                                    action is UndoSet3
        paragraph distributed
            visible when (PayablesInvoice.HasOpenMatchInvoiceMessages)
                text of "*MessagesExist"
                    bold
            visible when (PayablesInvoice.DisplayCreateInProgress)
                text of "<PayablesInvoice.CreateDetailsProcessingInBackgroundMsg>"
                    bold
                    italics
                    color of red
            visible when (PayablesInvoice.DisplayMatchInProgress)
                text of "<MatchProcessingInBackgroundMsg>"
                    bold
                    italics
                    color of red
            visible when (PayablesInvoice.DisplayMatchInProgressWithAsyncFailure)
                text of "<MatchProcessingInBackgroundAsyncFailureMsg>"
                    bold
                    italics
                    color of red
            visible when (PayablesInvoice.BudgetEditInProgress)
                text of "BudgetEditsInProgress"
                    bold
                    color of red
