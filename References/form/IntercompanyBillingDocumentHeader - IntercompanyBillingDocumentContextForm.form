IntercompanyBillingDocumentContextForm is a Form
    title is "IntercompanyBillingDocument"
    restrict action AddToSettlement
    Layout
        three column
            IntercompanyBillingDocumentHeader
                label is "Document"
                display as text
            paragraph
                Status
                    display as text
                visible when (Status.PendingApproval)
                    DisplayByCurrentApproverDesc
                        no label
                        display as text
            paragraph
                visible when (IntercompanyBillingGroup.UseIDM)
                    ICBInvoiceIDMTemplate
                        select is IntercompanyBillingInvoiceTemplate
                    button of "<ICBInvoiceIDMTemplate.Name>"
                        link is external "<ICBInvoiceIDMTemplate.RetrieveUrl>"
                        display as link
                    visible when (ValidForIDMGeneration)
                        button of "GenerateDocument"
                            action is GenerateIDMDocument
                    visible when (HasIDMDocument)
                        button of "ViewInvoice"
                            link is external "<DerivedIDMInvoiceLink>"
                            display as link
                visible when (not IntercompanyBillingGroup.UseIDM)
                    IntercompanyBillingInvoice
                        label is "BillingInvoiceTemplate"
                    visible when (GeneratedInvoiceExists)
                        button of "ViewInvoice"
                            view GeneratedInvoice.File
                            display as link
        single column
            Description
        two column
            paragraph
                DerivedCreateDate
                    label is "Created"
                    display as text
                DerivedCreateActorName
                    label is "By"
                    display as text
            paragraph
                OriginatedFrom
                    display as text
        three column distributed
            column1
                header2 of "Receivable"
                paragraph
                    ReceivableEntity.Company
                        select is ReceivableCompanySelectForIntercompanyBilling
                    ReceivableEntity.Company.Name
                        no label
                        display as text
                paragraph
                    ReceivableEntity.ProcessLevel
                    ReceivableEntity.ProcessLevel.Name
                        no label
                        display as text
                paragraph
                    ReceivableEntity.ReceivableGeneralLedgerCode
                        label is "AccrualCode"
                    ReceivableEntity.ReceivableGeneralLedgerCode.Description
                        no label
                        display as text
                paragraph
                    ReceivableEntity.CurrencyTable
                    ReceivableEntity.CurrencyTable.Description
                        no label
                        display as text
                paragraph
                    ReceivableEntity.CurrencyExchangeRate
                        label is "ExchangeRate"
                    ReceivableEntity.Company.Currency
                        no label
                        display as text
                blank line
                paragraph
                    ReceivableEntity.ReceivableInvoice
                        display as text
                    visible when (ReceivableInvoiceExists)
                        button of "View"
                            link is ReceivableInvoice
                            display as link
                visible when (DisplayApprovalCodes)
                    paragraph
                        ReceivableApprovalCode
                            select is ApprovalCodesWithLevels
                            show up to 10 characters
                        ReceivableApprovalCode.Description
                            no label
                            display as text
            column2
                header2 of "Payable"
                paragraph
                    PayableEntity.Company
                        select is PayablesCompanySelectForIntercompanyBilling
                    PayableEntity.Company.Name
                        no label
                        display as text
                paragraph
                    PayableEntity.ProcessLevel
                    PayableEntity.ProcessLevel.Name
                        no label
                        display as text
                paragraph
                    PayableEntity.PayablesAccrualCode
                        label is "AccrualCode"
                    PayableEntity.PayablesAccrualCode.Description
                        no label
                        display as text
                paragraph
                    PayableEntity.CurrencyTable
                    PayableEntity.CurrencyTable.Description
                        no label
                        display as text
                paragraph
                    PayableEntity.CurrencyExchangeRate
                        label is "ExchangeRate"
                    PayableEntity.Company.GeneralLedgerCompany.Currency
                        no label
                        display as text
                blank line
                paragraph
                    PayableEntity.PayablesInvoice.Invoice
                        label is "PayableInvoice"
                        display as text
                    visible when (PayablesInvoiceExists)
                        button of "View"
                            link is PayablesInvoice
                            display as link
                visible when (DisplayApprovalCodes)
                    paragraph
                        ApprovalCode
                            label is "PayableApprovalCode"
                            select is ApprovalCodesWithLevels
                            show up to 10 characters
                        ApprovalCode.Description
                            no label
                            display as text
            column3
                header3 of "Totals"
                ExtendedAmountTotal
                    label is "SubTotal"
                    display as text
                TaxTotal
                    label is "TaxTotal"
                    display as text
                WithholdingTotal
                    label is "WithholdingTotal"
                    display as text
                SecondaryWithholdingTotal
                    label is "SecondaryWithholdingTotal"
                    display as text
                paragraph
                    NetDueAmount
                        label is "TotalDue"
                        display as text
                    DocumentCurrency
                        no label
                        display as text
                visible when (Status.Released)
                    paragraph
                        SettledAmount
                            display as text
                        DocumentCurrency
                            no label
                            display as text
                visible when (ReceivableCurrencyNotDocumentCurrency)
                    paragraph
                        DerivedNetDueInReceivableCurrency
                            label is "ReceivableBase"
                            display as text
                        ReceivableEntity.Company.Currency
                            no label
                            display as text
                visible when (PayableCurrencyNotDocumentCurrency)
                    paragraph
                        DerivedNetDueInPayableCurrency
                            label is "PayableBase"
                            display as text
                        PayableEntity.Company.GeneralLedgerCompany.Currency
                            no label
                            display as text
        blank line
        blank line
        paragraph
            DocumentCurrency
            DocumentCurrency.Description
                no label
                display as text
        two column independent
            InvoiceDate
            PostDate
        two column independent
            TermsCode
                label is "PaymentTerms"
                select is ActiveNetTermsWithNoDiscounts
            DueDate
        paragraph
            visible when (not DisplayApprovalCodes)
                RequiresApproval
                visible when (RequiresApproval)
                    ApprovalCode
                        select is ApprovalCodesWithLevels
                    ApprovalCode.Description
                        no label
                        display as text
