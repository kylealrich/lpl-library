ReceivableInvoiceContext is a Form
    title is "Transaction"
    Layout
        four column distributed
            column1
                Company.RepresentativeText
                    label is "Company"
                    display as text
                paragraph
                    ReceivableProcessLevel.RepresentativeText
                        display as text
            column2
                paragraph
                    Company.Currency
                        label is "Currency"
                        display as text
                paragraph
                    OriginalCurrency
                        display as text
            column3
                paragraph
                    visible when (IsManualEntry)
                        button of "<BatchNumber>"
                            link is ReceivableInvoiceBatchNav
                            label is "BatchNumber"
                            display as link
                    visible when (not IsManualEntry)
                        BatchNumber
                            label is "BatchNumber"
                            display as text
                paragraph
                    ReceivableInvoiceType
                        label is "Type"
                        display as text
                    visible when (ReceivableInvoiceType.MixedSignLines)
                        AlternateReceivableInvoiceType
                            label is "AlternateType"
                            display as text
                    ReceivableInvoice
                        label is "InvoiceNumber"
                        display as text
            column4
                paragraph
                    Status
                        display as tag
                            color of gray when (Status.Unreleased)
                            color of green
                paragraph
                    visible when (InvoiceEntryTemplate.Expanded)
                        ExpandedInvoiceEntrySignedTransactionAmount
                            label is "InvoiceAmount"
                            display as text
                        visible when (ShowExpandedInvoiceEntryAmountOutOfBalance)
                            text of "*Out_\\Of_\\Balance*"
                                bold
                                color of red
                    visible when (not InvoiceEntryTemplate.Expanded)
                        TransientSignedTransactionAmountForUI
                            label is "InvoiceAmount"
                            display as text
                    visible when (Status.Released)
                        OpenReceivableInvoiceAmountSigned
                            label is "OpenAmount"
                            display as text
        visible when (InvoiceEntryTemplate.Expanded)
            four column distributed
                column1
                    DerivedExpandedInvoiceEntryTemplateLineAmountForPrinting
                        label is "LineExtendedAmountTotal"
                        display as text
                column2
                    DerivedExpandedInvoiceEntryTemplateAOCAmountForPrinting
                        label is "AddOnChargeGrossAmountTotal"
                        display as text
                column3
                    DerivedExpandedInvoiceEntryTemplateTaxAmountForPrinting
                        label is "TaxAmountTotal"
                        display as text
                column4
                    visible when (ShowExpandedInvoiceEntryAmountOutOfBalance)
                        paragraph
                            DerivedExpandedInvoiceEntryTemplateTotalAmountForPrinting
                                label is "DerivedTotalAmount"
                                display as text
                            button of "DeriveInvoiceAmount"
                                action is Unreleased.DeriveTransactionAmount
        button of "ViewInvoice"
            visible when (HasIDMDocument)
            link is external "<DerivedIDMInvoiceLink>"
                lazy url retrieval
            display as link
        paragraph
            visible when (BackgroundProcessing.TaxProcessing)
                text of "Background_Processing..._Refresh_To_View_Progress"
                    header4
                    bold
                    color of red
        paragraph
            visible when (ErrorMessage entered)
                text of "Error:"
                    header4
                    bold
                    color of red
                ErrorMessage
                    label is "_"
                    header4
                    bold
                    color of red
                    display as text
