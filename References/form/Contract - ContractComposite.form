ContractComposite is a CompositeForm
    is primary
    title is "<DisplayContract>"
    context form is ContractContext
        background is theme color
    implements IndependentFormPanels
    restrict action EmployeeAddAdditionalSecurityAccessContact
    restrict action EmployeeRemoveAdditionalSecurityAccessContact
    restrict action Active.RemoveFromExpireListAction
    restrict action Addendum.RemoveFromExpireListAction
    restrict action Amendment.RemoveFromExpireListAction
    restrict action SelectContractForRebate
    restrict action Active.CreateNewCopy
    restrict action RollSpreadDates
    restrict action CreateIDMXML
    restrict action DeleteIDMXML
    restrict action CreateContractOrLinesFromSelectedLines
    Actions
        action is CreateDocumentWithFieldsOnly
            hide when invalid
        action is Draft.Release
            action icon is release
            hide when invalid
        action is Draft.RenewalRelease
            action icon is release
            hide when invalid
        action is Amendment.Release
            action icon is release
            hide when invalid
        action is Addendum.Release
            action icon is release
            hide when invalid
        action is ReleaseMembers
            action icon is release
            hide when invalid
            valid when (HasMembersToRelease)
        action is ReadyToActivate.Activate
            hide when invalid
            valid when (not HasMembersToRelease)
        action is Active.CreateAddendum
            action icon is undo
            hide when invalid
        action is Active.CreateAmendment
            action icon is undo
            hide when invalid
        action is ModifyContract
            hide when invalid
        action is CreateChangeOrder
            hide when invalid
        action is CreateContractDocument
            hide when invalid
        action is EmailContract
            action icon is export
            hide when invalid
            valid when (ContractStatus.ReadyToActivate)
        action is RemoveContractHold
            action icon is undo
            hide when invalid
            valid when (CanRemoveHold)
        action is Inactive.ReactivateContract
            action icon is undo
            label is "Reactivate"
            hide when invalid
            valid when (ContractStatus.Inactive)
        action is Inactive.ReactivateAddendum
            action icon is undo
            label is "Reactivate"
            hide when invalid
            valid when (ContractStatus.Inactive)
        action is Inactive.ReactivateAmendment
            action icon is undo
            label is "Reactivate"
            hide when invalid
            valid when (ContractStatus.Inactive)
        action is Draft.AcceptProposedContract
            hide when invalid
        action is Draft.RejectProposedContract
            hide when invalid
        action is Draft.ReturnProposedContract
            label is "ReturnForMoreInformation"
            hide when invalid
        action is UpdateDistributorContract
            hide when invalid
        action is ChangeSupplierAndVendor
            hide when invalid
            valid when (SupplierNotEntered)
        action is Draft.CreateSupplier
            hide when invalid
        action is CloseContract
            action icon is finalize
            label is "Close"
            hide when invalid
            valid when (ContractActiveOrInactive)
        navigation is ContractDocumentHistory
            hide when invalid
            valid when (not UseIDM)
        action is CreateIDMRedlineDocument
            action icon is create
            hide when invalid
        action is UpdateRedlineDocument
            action icon is apply
            hide when invalid
        navigation is ContractBuyerTermVersionsCompositeNav
            action icon is transfer
            label is "TermsNegotiation"
            hide when invalid
            valid when (ShowBuyerTermNegotiationButton)
        navigation is TierContractsAndItems
            label is "QualifierInformation"
            hide when invalid
        navigation is ManageClinicalInformation
            hide when invalid
        action is previous record
            label is "_"
            hide when invalid
        action is next record
            label is "_"
            hide when invalid
        action is save
            label is "_"
        action is refresh
            label is "_"
    Contract is a Panel
        form is Contract
    AlertLinks is a Panel
        visible when (ShowInformationLinksForm)
        independent form is AlertLinks
    AlertLists is a MultiListPanel
        visible when (ShowInformationMultiListPanel)
        list is BudgetEditErrorRel.primary
            visible when (BudgetErrorsExist)
            panel text is "BudgetsExceeded;_ContractCanNotActivate"
        list is WarningBudgetEditErrorRel.primary
            visible when (WarningBudgetErrorsExist)
        list is ContractLinePriceChangeRel.ToleranceErrors
            visible when (ToleranceErrorsExist)
            panel text is "CostUpdateToleranceErrors"
        list is ContractLineManualPriceChangeRel.ManualToleranceErrors
            visible when (ManualToleranceErrorsExist)
            panel text is "ManualCostUpdateToleranceErrors"
        list is DistributorContractLinesMfgVendItemAndVendorItemMatchRels.DistributorContractLinesWithMatchingVendorAndManufacturerItems
            visible when (HasLinesWithMatchingVendorAndManufacturerItems)
            panel text is "AssignVendorItems"
        list is DistributorContractLineMemberRel.MembersToUpdateForDistributor
            visible when (ManufacturerWithLineMembers)
            panel text is "UpdateContractLineMembersForDistributor"
        list is ModifiedContractLineMemberRel.ModifiedContractLineMembers
            visible when (HasModifiedPricing)
            panel text is "ModifiedContractLineMembers"
        list is DistributorContractLineRel.ContractLinesToUpdateToDistributor
            visible when (ManufacturerModificationsToPush)
            panel text is "UpdateDistributorDetails"
    PurchaseTypeInformation is a Panel
        title is "PurchaseType"
        form is PurchaseTypeHeader
    Articles is a Panel
        visible when (not AddendumRedline)
        list is ContractArticlesByDisplayRel.ContractArticles
            helper list is ArticleDisplayRel.ContractArticles
                action is AttachToContractWithTerms
                action is AttachToContractWithoutTerms
    ArticlesNoHelper is a Panel
        title is "Articles"
        visible when (AddendumRedline)
        list is ContractArticlesByDisplayRel.ContractArticles
    QuestionList is a Panel
        visible when (CanUpdateQuestions)
        list is ContractQuestion set.ContractQuestions
            helper list is AllQuestionsRel.AttachToContractQuestions
                action is AttachQuestionToContract
    QuestionListProposal is a Panel
        title is "QuestionList"
        visible when (CanUpdateQuestionsProposalReturned)
        list is ContractQuestion set.ContractQuestionsProposal
            helper list is AllQuestionsRel.AttachToContractQuestions
                action is AttachQuestionToContract
                title is "AttachQuestionsFromRepository"
            helper list is AllQuestionsRel.AttachToContractQuestions
                action is AttachProposalQuestionToContract
                title is "AttachProposalQuestionsFromRepository"
    QuestionListProposal2 is a Panel
        title is "QuestionList"
        visible when (CanUpdateQuestionsProposal)
        list is ContractQuestion set.ContractQuestionsProposal
            helper list is AllQuestionsRel.AttachToContractQuestions
                action is AttachQuestionToContract
    QuestionListReleased is a Panel
        title is "QuestionList"
        visible when (CannotUpdateQuestions)
        list is ContractQuestion set.ContractQuestions
    QuestionListReleasedProposal is a Panel
        title is "QuestionList"
        visible when (CannotUpdateQuestionsProposal)
        list is ContractQuestion set.ContractQuestionsProposal
    QuestionsAndAnswers is a Panel
        title is "Questions_andAnswers"
        visible when (UseQuestionsOnContract)
        template is ContractQuestionsDisplayRel
            business class is ContractQuestionAnswer
                form is ContractQuestionAnswerSummary
    Participants is a Panel
        title is "Participants<ParticipantIndicator>"
        visible when (IsNotDistributorAndNotManufacturer)
        list is ContractParticipant set.ContractParticipants
    PricingIdentifiers is a Panel
        title is "PricingIdentifiers<PricingIdentifierIndicator>"
        visible when (IsDistributorContract)
        list is ContractDistributorPricing set.ContractDistributorPricing
    Tiers is a Panel
        title is "Tiers<TierIndicator>"
        visible when (IsManufacturerContract)
        list is ContractTier set.ContractTiers
    ManufacturerTierMembers is a Panel
        title is "Members<TierMemberIndicator>"
        visible when (IsManufacturerContract)
        list is ContractTierMember set.ContractTierMember
    ManufacturerContracts is a Panel
        visible when (NotClosedAndDistributor)
        list is ManufacturerContractForDistContractRel.AttachedManufacturerContracts
            helper list is MfgContractsRel.AllManufacturerContracts
                action is AttachMfgToContract
    ManufacturerContractsNotInProgress is a Panel
        title is "ManufacturerContracts"
        visible when (ClosedAndDistributor)
        list is ManufacturerContractForDistContractRel.AttachedManufacturerContracts
    DistributorPricingMembers is a Panel
        title is "Members<PricingMemberIndicator>"
        visible when (IsDistributorContract)
        list is ContractDistributorPricingMember(Contract) set.ContractDistributorPricingMembers
    Lines is a Panel
        title is "Lines<LineIndicator>"
        visible when (NonServicePurchaseTypeNotGPO)
        list is ContractLine set.NonServiceContractLines
    GPOLines is a Panel
        title is "Lines<LineIndicator>"
        visible when (DisplayGPOLinesPanel)
        list is ContractLine set.GPOContractLines
    ServiceLines is a Panel
        title is "Lines<LineIndicator>"
        visible when (ServicePurchaseType)
        list is ContractLine set.ServiceContractLines
    NoContractLines is a Panel
        title is "Lines<LineIndicator>"
        visible when (DisplayNoContractLinesPanel)
        list is ContractLine set.ContractLines
    CapitatedLines is a MultiListPanel
        title is "ProceduresAndComponents"
        visible when (DisplayCapitatedLines)
        list is ContractLine set.CapitatedProcedures
        list is ContractLine set.CapitatedComponents
    ComponentOnlyLines is a MultiListPanel
        title is "GroupAndComponents"
        visible when (DisplayCapitatedComponentLines)
        list is ContractCapitatedComponentGroup set.ContractCapitatedComponentGroupsCompOnly
        list is ContractLine set.CapitatedComponentsOnlyList
    Rebates is a Panel
        title is "Rebates<RebateCount>"
        visible when (UseRebatesOnContract)
        list is ContractRebate set.ContractRebates
    RelatedReferences is a Panel
        title is "RelatedReferences<RelatedDocumentCount>"
        list is RelatedContract set.RelatedContracts
    Contacts is a Panel
        title is "Contacts<AttachedContactCount>"
        list is ActiveContractContactsRel.AttachedContacts
    Comments is a Panel
        title is "Comments<CommentCount>"
        visible when (UseCommentsOnContract)
        list is ContractCommentRel.ContractComments
    Attachments is a Panel
        title is "Attachments<AttachmentCount>"
        list is ContractAttachmentRel.ContractAttachmentList
    Commitments is a Panel
        title is "Commitments<CommitmentIndicator>"
        visible when (IsNotDistributorAndNotManufacturerAndPurchaseType)
        form is PurchaseCommitments
    ChangeOrdersAndAllowances is a MultiListPanel
        visible when (ShowChangeOrdersForService)
        list is ContractVersionsForChangeOrderRel.ContractChangeOrders
            visible when (AnyChangeOrderExists)
        list is ContractAllowance set.AllowancesForAContract
    ChangeOrders is a Panel
        visible when (ShowChangeOrdersForNonService)
        list is ContractVersionsForChangeOrderRel.ContractChangeOrders
    Retainage is a Panel
        title is "Retainage<RetainageIndicator>"
        visible when (UseRetainageOnContract)
        form is Retainage
    Milestones is a Panel
        title is "Milestones<MilestoneCount>"
        visible when (UseMilestonesOnContract)
        list is ContractMilestone set.ContractMilestones
    Deliverables is a Panel
        title is "Deliverables<DeliverableCount>"
        visible when (UseDeliverablesOnContract)
        list is ContractDeliverable set.ContractDeliverables
    Locations is a Panel
        title is "Locations<LocationIndicator>"
        visible when (CanUseAnyLocations)
        list is ContractLocationRel.ContractLocationList
    Diversity is a Panel
        title is "Diversity<DiversityCount>"
        visible when (SupplierHasValidDiversityOrExistsNotClosed)
        list is ContractExistingDiversityRel.primary
            helper list is SupplierDiversitySelectionRel.DiversityResponses
                action is AttachDiversityToContract
    DiversityClosed is a Panel
        title is "Diversity<DiversityCount>"
        visible when (SupplierHasValidDiversityOrExistsClosed)
        list is ContractExistingDiversityRel.primary
    Pricing is a Panel
        title is "Pricing<PricingCount>"
        visible when (IsNotDistributorAndNotManufacturerAndNotTemplateAndPurchaseType)
        list is ContractPricing set.ContractPricings
    Subcontractors is a Panel
        title is "Subcontractors<SubcontractorCount>"
        visible when (SubcontractorContractNotClosed)
        list is ContractSubcontractor set.ContractSubcontractorList
            helper list is SubcontractorRels.SubcontractorActiveList
                action is AttachToContract
                valid when (not ContractInactiveClosed)
    SubcontractorsClosed is a Panel
        title is "Subcontractors<SubcontractorCount>"
        visible when (SubcontractorContractClosed)
        list is ContractSubcontractor set.ContractSubcontractorList
    PurchaseFrom is a Panel
        title is "PurchaseFroms<PurchaseFromIndicator>"
        visible when (DisplayPurchaseFroms)
        list is ContractPurchaseFromRels.ContractPurchaseFromList
    Email is a Panel
        title is "EmailNotifications<EmailIndicator>"
        visible when (EmailExists)
        list is ContractNotificationEmailRel.ContractNotificationEmails
    RedlineDocuments is a Panel
        title is "RedlineDocuments<RedlineCount>"
        visible when (CanDisplayNonIDMRedlinePanel)
        list is ContractRedlineDocument set.ContractRedlineDocumentList
    RedlineDocumentashBoard is a DashBoardPanel
        title is "IDMRedlineDocuments"
        visible when (DisplayIDMRedlineDocPanel)
        RedlineDocument is a Panel
            quad width
            form is ViewContractRedlineDocumentForm
        DocumentSignature is a Panel
            visible when (LatestRevisionRel.DisplaySignatureCard)
            quad width
            form is ViewContractSignatureRecipientForm
        DocumentSignatureRecipients is a Panel
            visible when (LatestRevisionRel.DisplaySignatureCard)
            quad width
            list is LatestRevisionRel.ContractSignatureRecipientRel.ContractSignatureRecipientList
    History is a Panel
        form is CMDashboardApproval
    MatrixAggregation is a Panel
        visible when (HasAggregatedDistributions)
        list is ContractDistributionAggregationRel.DistributionSummary
